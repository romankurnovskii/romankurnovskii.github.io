<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo "><title>Round #849/1791 (Div. 4) | Roman Kurnovskii</title><meta property="og:title" content="Round #849/1791 (Div. 4) | Roman Kurnovskii"><meta property="og:type" content="article"><meta property="og:image" content="https://romankurnovskii.com/images/icon.png"><meta property="og:url" content="https://romankurnovskii.com/en/tracks/algorithms-101/codeforces/849-div-4-1791/"><meta property="og:description" content="Codeforces Round #849 (Div. 4) / 1791"><meta property="og:locale" content="en"><meta property="og:site_name" content="Roman Kurnovskii"><meta property="article:published_time" content="2023-02-03T00:00:00+00:00"><meta property="article:modified_time" content="2023-02-11T14:07:35+02:00"><meta property="article:section" content="tracks"><link rel=icon type=image/png sizes=32x32 href=https://romankurnovskii.com/images/icon_huc02d7296c9eb9353758cb2467c0d17b0_10773_32x32_fill_box_center_3.png><link rel=apple-touch-icon sizes=180x180 href=https://romankurnovskii.com/images/icon_huc02d7296c9eb9353758cb2467c0d17b0_10773_180x180_fill_box_center_3.png><link href=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css rel=stylesheet crossorigin=anonymous><script src=https://unpkg.com/flowbite@1.5.1/dist/flowbite.js></script>
<script src=https://unpkg.com/axios@0.27.2/dist/axios.min.js></script>
<script src=https://unpkg.com/lunr@2.3.9/lunr.min.js></script>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" media=print onload='this.media="all",this.onload=null' crossorigin><script src=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/js/all.min.js integrity=" sha512-8pHNiqTlsrRjVD4A/3va++W1sMbUHwWxxRPWNyVlql3T+Hgfd81Qc6FC5WMXDC+tSauxxzp1tgiAvSKFu1qIlA==" defer crossorigin></script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600&display=swap" rel=stylesheet><link rel=stylesheet href=https://romankurnovskii.com/css/yalla.min.7ac4cb22afcb0fe6c9e429a5b2738697db18c27eaba4609849e14253b139ae8b09149afca9dcb4b1f5f738ae28147cb8.css><script defer src=https://romankurnovskii.com/js/yalla.min.c10f88fac8e0f4c2c802131741be30a1f629861cc319c52238e2685191e08f721da37a6696906f314554e1ec7423f51c.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css media=print onload='this.media="all",this.onload=null' crossorigin><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js crossorigin></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js crossorigin></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script><script defer src=https://cdn.jsdelivr.net/npm/mermaid@9.1.3/dist/mermaid.min.js crossorigin></script><meta name=description content="Codeforces Round #849 (Div. 4) / 1791"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Roadmaps","item":"https://romankurnovskii.com/en/tracks/"},{"@type":"ListItem","position":2,"name":"Algorithms 101","item":"https://romankurnovskii.com/en/tracks/algorithms-101/"},{"@type":"ListItem","position":3,"name":"Codeforces","item":"https://romankurnovskii.com/en/tracks/algorithms-101/codeforces/"},{"@type":"ListItem","position":4,"name":"Round #849/1791 (Div. 4)","item":"https://romankurnovskii.com/en/tracks/algorithms-101/codeforces/849-div-4-1791/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://romankurnovskii.com/en/tracks/algorithms-101/codeforces/849-div-4-1791/"},"headline":"Round #849\/1791 (Div. 4) | Roman Kurnovskii","datePublished":"2023-02-03T00:00:00+00:00","dateModified":"2023-02-11T14:07:35+02:00","wordCount":1467,"publisher":{"@type":"Person","name":"Roman Kurnovskii","logo":{"@type":"ImageObject","url":"https://romankurnovskii.com/images/icon.png"}},"description":"Codeforces Round #849 (Div. 4) \/ 1791"}</script><link rel=preconnect href=https://www.google-analytics.com crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-26F2C5ZR4Y"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-26F2C5ZR4Y")</script><script type=text/javascript>(function(e,t,n,s,o,i,a){e[o]=e[o]||function(){(e[o].a=e[o].a||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://mc.yandex.ru/metrika/tag.js?v2","ym"),ym(87734724,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0})</script><noscript><div><img src=https://mc.yandex.ru/watch/87734724 style=position:absolute;left:-9999px alt></div></noscript><script>let storageColorScheme=localStorage.getItem("lightDarkMode");const isDark2=JSON.parse(localStorage.getItem("DarkMode")||"false");isDark2?storageColorScheme="Dark":storageColorScheme="Light",((storageColorScheme=="Auto"||storageColorScheme==null)&&window.matchMedia("(prefers-color-scheme: dark)").matches||storageColorScheme=="Dark")&&document.getElementsByTagName("html")[0].classList.add("dark")</script></head><body class="flex min-h-screen flex-col"><header><div class="mx-auto w-full max-w-screen-xl"><nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0"><button id=navbar-btn class="md:hidden flex items-center px-3 py-2" aria-label="open mobile menu">
<i class="fas fa-bars"></i></button>
<a href=/en class="me-6 text-primary-text text-xl font-bold">Roman Kurnovskii</a><div id=mobile-burger-menu class="hidden block md:flex md:grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20"><ul id=menu><li class=parent><a href=/en/posts/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">Notes</a><ul class=child><li class=parent><a href=/en/categories/aws/>AWS <span class=expand>»</span></a><ul class=child><li class=parent><a href=/en/tracks/aws-certified-developer-associate/>AWS Developer Associate</a></li></ul></li><li class=parent><a href=/en/categories/os/>OS <span class=expand>»</span></a><ul class=child><li class=parent><a href=/en/categories/docker/>Docker</a></li><li class=parent><a href=/en/categories/linux/>Linux</a></li><li class=parent><a href=/en/categories/macos/>Mac</a></li></ul></li><li class=parent><a href=/en/categories/programming/>Programming <span class=expand>»</span></a><ul class=child><li class=parent><a href=/en/tracks/algorithms-101/>Algorithms</a></li><li class=parent><a href=/en/categories/hugo/>Hugo</a></li><li class=parent><a href=/en/categories/javascript/>JavaScript</a></li><li class=parent><a href=/en/categories/python/>Python</a></li></ul></li><li><a href=/en/categories/cheatsheet/>Cheat Sheets</a></li><li><a href=/en/p/links/>Links</a></li></ul></li><li class=parent><a href=/en/categories/roadmaps/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">Roadmaps</a><ul class=child><li><a href=/en/tracks/algorithms-101/>Algorithms101</a></li><li><a href=/en/tracks/aws-certified-developer-associate/>AWS Developer Associate</a></li><li><a href=/ru/tracks/disser/>Диссертация [RU]</a></li></ul></li><li class=parent><a href=/en/apps/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">Apps</a></li></ul></div><div class=flex><div class="relative pt-4 md:pt-0"><form id=search class="flex items-center"><label for=search-input class=sr-only>Search</label><div class="relative w-full"><input type=text type=search id=search-input class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder=Search required></div></form></div><div class="relative pt-4 ps-2 md:pt-0"><button class="p-1 rounded border dark:border-slate-700 hover:bg-slate-200 dark:hover:bg-slate-700" onclick='location.href="/en/search/"'>
<img width=13 src=https://img.icons8.com/ios-glyphs/30/null/search-more.png></button></div></div></nav></div><div id=is-open-mobile class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0"></div><script>document.addEventListener("DOMContentLoaded",()=>{switchMobileMenuBurger()})</script></header><main class="grow pt-16"><div class=pl-scrollbar><div class="mx-auto w-full max-w-screen-2xl lg:px-2 xl:px-4"><div class=lg:pt-8><div class="flex flex-col md:flex-row bg-secondary-bg rounded"><div class="md:w-1/4 lg:w-1/5 border-e"><div class="sticky mt-12"><div id=sidebar-title class="md:hidden mx-4 px-2 pt-4 pb-2 md:border-b text-tertiary-text md:text-primary-text"><span class=font-semibold>Table of Contents</span>
<i class='fas fa-caret-right ms-1'></i></div><div id=sidebar-toc class="hidden overflow-y-auto md:block mx-6 md:mx-0 pe-2 pt-2 md:max-h-doc-sidebar bg-primary-bg md:bg-transparent"><div class="flex flex-wrap ms-1 -me-2 p-1 bg-secondary-bg md:bg-primary-bg rounded"><a class=hover:text-yalla href=https://romankurnovskii.com/en/tracks/algorithms-101/>Algorithms 101</a></div><aside aria-label=Sidebar><div class="py-2 px-1"><ul id=doc__nav__sidebar class=space-y-1><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/plan/><span>Plan</span></a></li><li><div class=doc__nav__section><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/>LeetCode Problems</a>
<button type=button aria-controls=https://romankurnovskii.com/en/tracks/algorithms-101/problems/ data-collapse-toggle=https://romankurnovskii.com/en/tracks/algorithms-101/problems/ aria-expanded=false>
<i class="fa-solid fa-angle-down fa-xs" aria-controls=https://romankurnovskii.com/en/tracks/algorithms-101/problems/ data-collapse-toggle=https://romankurnovskii.com/en/tracks/algorithms-101/problems/></i></button></div><ul id=https://romankurnovskii.com/en/tracks/algorithms-101/problems/ class="ml-3 hidden"><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/1-two-sum/><span>1. Two Sum</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/13-roman-to-integer/><span>13. Roman to Integer</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/14-longest-common-prefix/><span>14. Longest Common Prefix</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/20-valid-parentheses/><span>20. Valid Parentheses</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/21-merge-two-sorted-lists/><span>21. Merge Two Sorted Lists</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/26-remove-duplicates-from-sorted-array/><span>26. Remove Duplicates from Sorted Array</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/66-plus-one/><span>66. Plus One</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/69-sqrtx/><span>69. Sqrt(x)</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/70-climbing-stairs/><span>70. Climbing Stairs</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/88-merge-sorted-array/><span>88. Merge Sorted Array</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/94-binary-tree-inorder-traversal/><span>94. Binary Tree Inorder Traversal</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/2-add-two-numbers/><span>2. Add Two Numbers</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/3-longest-substring-without-repeating-characters/><span>3. Longest Substring Without Repeating Characters</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/5-longest-palindromic-substring/><span>5. Longest Palindromic Substring</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/7-reverse-integer/><span>7. Reverse Integer</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/11-container-with-most-water.en./><span>11. Container With Most Water</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/15-3sum/><span>15. 3Sum</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/17-letter-combinations-of-a-phone-number/><span>17. Letter Combinations of a Phone Number</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/19-remove-nth-node-from-end-of-list/><span>19. Remove Nth Node From End of List</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/22-generate-parentheses/><span>22. Generate Parentheses</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/28-find-the-index-of-the-first-occurrence-in-a-string.en./><span>28. Find the Index of the First Occurrence in a String</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/29-divide-two-integers/><span>29. Divide Two Integers</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/33-search-in-rotated-sorted-array/><span>33. Search in Rotated Sorted Array</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/34-find-first-and-last-position-of-element-in-sorted-array/><span>34. Find First and Last Position of Element in Sorted Array</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/36-valid-sudoku/><span>36. Valid Sudoku</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/38-count-and-say/><span>38. Count and Say</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/46-permutations/><span>46. Permutations</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/48-rotate-image/><span>48. Rotate Image</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/49-group-anagrams/><span>49. Group Anagrams</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/50/><span>50. Pow(x, n)</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/53/><span>53. Maximum Subarray</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/55/><span>55. Jump Game</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/56/><span>56. Merge Intervals</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/62/><span>62. Unique Paths</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/problems/73/><span>73. Set Matrix Zeroes</span></a></li></ul></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/algorithms/><span>Algorithm Patterns</span></a></li><li><div class=doc__nav__section><a href=https://romankurnovskii.com/en/tracks/algorithms-101/data-structures/>Data Structures</a>
<button type=button aria-controls=https://romankurnovskii.com/en/tracks/algorithms-101/data-structures/ data-collapse-toggle=https://romankurnovskii.com/en/tracks/algorithms-101/data-structures/ aria-expanded=false>
<i class="fa-solid fa-angle-down fa-xs" aria-controls=https://romankurnovskii.com/en/tracks/algorithms-101/data-structures/ data-collapse-toggle=https://romankurnovskii.com/en/tracks/algorithms-101/data-structures/></i></button></div><ul id=https://romankurnovskii.com/en/tracks/algorithms-101/data-structures/ class="ml-3 hidden"><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/data-structures/binary-tree/><span>Binary Tree</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/data-structures/segment-tree/><span>Segment Tree</span></a></li></ul></li><li><div class=doc__nav__section><a href=https://romankurnovskii.com/en/tracks/algorithms-101/codeforces/>Codeforces</a>
<button type=button aria-controls=https://romankurnovskii.com/en/tracks/algorithms-101/codeforces/ data-collapse-toggle=https://romankurnovskii.com/en/tracks/algorithms-101/codeforces/ aria-expanded=false>
<i class="fa-solid fa-angle-down fa-xs" aria-controls=https://romankurnovskii.com/en/tracks/algorithms-101/codeforces/ data-collapse-toggle=https://romankurnovskii.com/en/tracks/algorithms-101/codeforces/></i></button></div><ul id=https://romankurnovskii.com/en/tracks/algorithms-101/codeforces/ class=ml-3><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/codeforces/cp-template/><span>Python template for contests</span></a></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/codeforces/849-div-4-1791/ class=bg-tertiary-bg><span>Round #849/1791 (Div. 4)</span></a></li></ul></li><li><a href=https://romankurnovskii.com/en/tracks/algorithms-101/helpers/><span>Helpers</span></a></li></ul></div></aside></div></div></div><div class="w-full md:w-3/4 lg:w-4/5 pb-2 pt-2 md:pt-2"><div class=flex><div class="w-full lg:w-3/4 px-6"><article class=prose><h1>Round #849/1791 (Div. 4)</h1><div class="text-tertiary-text text-sm not-prose mt-2 flex flex-row flex-wrap items-center"><div class=me-4><i class="fa-regular fa-calendar-days"></i>
<span>Updated: 2023-02-11</span></div><div class=me-4><i class="fa-regular fa-clock"></i>
<span>7 min read</span></div><div class=me-4><i class="fa-regular fa-folder me-1"></i>
<a href=https://romankurnovskii.com/en/categories/algorithms/ class=hover:text-yalla>Algorithms</a></div><div id=page__views__div class="me-4 my-2"><i class="fa-regular fa-eye me-1"></i>
<span id=page__views></span></div></div><div class="block lg:hidden"><h3 class=text-lg>On This Page</h3><div class=break-words><nav id=TableOfContents><ul><li><ul><li><a href=#a-codeforces-checking>A. Codeforces Checking</a></li><li><a href=#b-following-directions>B. Following Directions</a></li><li><a href=#c-prepend-and-append>C. Prepend and Append</a></li><li><a href=#d-distinct-split>D. Distinct Split</a></li><li><a href=#e-negatives-and-positives>E. Negatives and Positives</a></li><li><a href=#f-range-update-point-query>F. Range Update Point Query</a></li><li><a href=#todo-g1-teleporters-easy-version>TODO G1. Teleporters (Easy Version)</a></li><li><a href=#todo-g2-teleporters-hard-version>TODO G2. Teleporters (Hard Version)</a></li></ul></li></ul></nav></div></div><p><mark>Contest date: 2023-02-03</mark></p><ul><li><a href=https://codeforces.com/contest/1791>Contest problems</a></li><li><a href=https://codeforces.com/blog/entry/112282>Editorial</a></li></ul><h3 id=a-codeforces-checking>A. Codeforces Checking</h3><p><a href=https://codeforces.com/contest/1791/problem/A>https://codeforces.com/contest/1791/problem/A</a></p><p><strong>Solution:</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>solve</span>(letter):
</span></span><span style=display:flex><span>    code <span style=color:#666>=</span> <span style=color:#4070a0>&#34;codeforces&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> letter <span style=color:#007020;font-weight:700>in</span> code:
</span></span><span style=display:flex><span>        <span style=color:#007020>print</span>(<span style=color:#4070a0>&#34;YES&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#007020>print</span>(<span style=color:#4070a0>&#34;NO&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#007020;font-weight:700>for</span> _ <span style=color:#007020;font-weight:700>in</span> <span style=color:#007020>range</span>(<span style=color:#007020>int</span>(<span style=color:#007020>input</span>())):
</span></span><span style=display:flex><span>    letter <span style=color:#666>=</span> <span style=color:#007020>input</span>()
</span></span><span style=display:flex><span>    solve(letter)
</span></span></code></pre></div><h3 id=b-following-directions>B. Following Directions</h3><p><a href=https://codeforces.com/contest/1791/problem/B>https://codeforces.com/contest/1791/problem/B</a></p><blockquote><p>geometry, implementation, *800</p></blockquote><p><strong>Solution:</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>solve</span>(n, s):
</span></span><span style=display:flex><span>    x <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>    y <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>for</span> move <span style=color:#007020;font-weight:700>in</span> s:
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>if</span> move <span style=color:#666>==</span> <span style=color:#4070a0>&#39;L&#39;</span>:
</span></span><span style=display:flex><span>            x <span style=color:#666>-=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>elif</span> move <span style=color:#666>==</span> <span style=color:#4070a0>&#39;R&#39;</span>:
</span></span><span style=display:flex><span>            x <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>elif</span> move <span style=color:#666>==</span> <span style=color:#4070a0>&#39;U&#39;</span>:
</span></span><span style=display:flex><span>            y <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>elif</span> move <span style=color:#666>==</span> <span style=color:#4070a0>&#39;D&#39;</span>:
</span></span><span style=display:flex><span>            y <span style=color:#666>-=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>if</span> x <span style=color:#666>==</span> <span style=color:#40a070>1</span> <span style=color:#007020;font-weight:700>and</span> y <span style=color:#666>==</span> <span style=color:#40a070>1</span>:
</span></span><span style=display:flex><span>            <span style=color:#007020>print</span>(<span style=color:#4070a0>&#34;YES&#34;</span>)
</span></span><span style=display:flex><span>            <span style=color:#007020;font-weight:700>break</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#007020>print</span>(<span style=color:#4070a0>&#34;NO&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#007020;font-weight:700>for</span> _ <span style=color:#007020;font-weight:700>in</span> <span style=color:#007020>range</span>(<span style=color:#007020>int</span>(<span style=color:#007020>input</span>())): <span style=color:#60a0b0;font-style:italic># attempts</span>
</span></span><span style=display:flex><span>    num <span style=color:#666>=</span> <span style=color:#007020>int</span>(<span style=color:#007020>input</span>())
</span></span><span style=display:flex><span>    letter <span style=color:#666>=</span> <span style=color:#007020>input</span>()
</span></span><span style=display:flex><span>    solve(num, letter)
</span></span></code></pre></div><h3 id=c-prepend-and-append>C. Prepend and Append</h3><p><a href=https://codeforces.com/contest/1791/problem/C>https://codeforces.com/contest/1791/problem/C</a></p><blockquote><p>mplementation, two pointers, *800</p></blockquote><p>In this problem we are allowed:</p><ul><li>to remove <strong>first</strong> letter of the binary string and <strong>last</strong>.</li><li>We can do this while <strong>first</strong> letter is not equal to the <strong>last</strong> according to the definition of the problem. (<em>Add 𝟶 to one end of the string and 𝟷 to the other end of the string.</em>)</li></ul><p><strong>Solution:</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>solve</span>(n, s):
</span></span><span style=display:flex><span>    res <span style=color:#666>=</span> n   
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> res <span style=color:#666>&lt;=</span> <span style=color:#40a070>1</span>:
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>return</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>while</span> res <span style=color:#666>&gt;</span> <span style=color:#40a070>0</span>:
</span></span><span style=display:flex><span>        first <span style=color:#666>=</span> s[<span style=color:#40a070>0</span>]
</span></span><span style=display:flex><span>        last <span style=color:#666>=</span> s[<span style=color:#666>-</span><span style=color:#40a070>1</span>]
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>if</span> first <span style=color:#666>==</span> last:
</span></span><span style=display:flex><span>            <span style=color:#007020;font-weight:700>return</span> res
</span></span><span style=display:flex><span>        s <span style=color:#666>=</span> s[<span style=color:#40a070>1</span>:<span style=color:#666>-</span><span style=color:#40a070>1</span>]
</span></span><span style=display:flex><span>        res <span style=color:#666>-=</span> <span style=color:#40a070>2</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>return</span> res
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#007020;font-weight:700>for</span> _ <span style=color:#007020;font-weight:700>in</span> <span style=color:#007020>range</span>(<span style=color:#007020>int</span>(<span style=color:#007020>input</span>())): <span style=color:#60a0b0;font-style:italic># attempts</span>
</span></span><span style=display:flex><span>    n <span style=color:#666>=</span> <span style=color:#007020>int</span>(<span style=color:#007020>input</span>())
</span></span><span style=display:flex><span>    s <span style=color:#666>=</span> <span style=color:#007020>input</span>()
</span></span><span style=display:flex><span>    <span style=color:#007020>print</span>(solve(n, s))
</span></span></code></pre></div><p><strong>Optimized:</strong></p><p>Use <a href=https://docs.python.org/3/library/collections.html#collections.deque><code>deque</code></a> from <code>collection</code> module</p><pre><code>&gt;&gt;&gt; deque('123')
deque(['1', '2', '3'])
</code></pre><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#007020;font-weight:700>from</span> <span style=color:#0e84b5;font-weight:700>collections</span> <span style=color:#007020;font-weight:700>import</span> deque
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>solve</span>(n, s):
</span></span><span style=display:flex><span>    s <span style=color:#666>=</span> deque(s)
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>while</span> <span style=color:#007020>len</span>(s) <span style=color:#007020;font-weight:700>and</span> s[<span style=color:#40a070>0</span>] <span style=color:#666>!=</span> s[<span style=color:#666>-</span><span style=color:#40a070>1</span>]:
</span></span><span style=display:flex><span>        s<span style=color:#666>.</span>popleft()
</span></span><span style=display:flex><span>        s<span style=color:#666>.</span>pop()
</span></span><span style=display:flex><span>    <span style=color:#007020>print</span>(<span style=color:#007020>len</span>(s))
</span></span></code></pre></div><h3 id=d-distinct-split>D. Distinct Split</h3><p><a href=https://codeforces.com/contest/1791/problem/D>https://codeforces.com/contest/1791/problem/D</a></p><blockquote><p>brute force, greedy, strings, *1000</p></blockquote><p>If we get a string <code>abcabcd</code> we need to split into two strings.</p><p><strong>Note 1:</strong> result number could not be more than string <code>length</code>.</p><p><code>abcabcd</code> can be splited into <code>abc</code> and <code>abcd</code>.
len(&lsquo;abc&rsquo;) = 3 #3 distinct letters
len(&lsquo;abcd&rsquo;) = 4
3 + 4 = 7</p><p>Output: maximum possible value of <code>𝑓(𝑎)+𝑓(𝑏)</code> such that <code>𝑎+𝑏=𝑠</code>.</p><p>Let&rsquo;s look at other examples and possible edge cases.</p><p><strong>Note 2:</strong> function for a string 𝑥 - is the number of <strong>distinct</strong> characters. (<em>From problem statement.</em>)</p><pre><code>'aaaaa' =&gt; 1 # 1 distinct
</code></pre><ol><li>If we concatenate two strings into one <code>s</code>, we need to keep order of the letters.</li><li>Need to split this string <code>s</code> in a such a way so that <strong>repeated letters</strong> fall into different parts of string <code>s</code> (<code>a</code> and <code>b</code>).</li></ol><p><code>abcab</code> => <code>abc</code> and <code>ab</code> better that <code>abca</code> and <code>b</code> because:</p><pre><code>f('abc') = 3    f('abca') = 3
f('ab') = 2     f('b') = 1
          5   &gt; 4
</code></pre><p><strong>Approach 1:</strong></p><ol><li>Divide string into two parts starting left part from <code>len 1</code>. For example:
s = &lsquo;abcabc&rsquo;
a = &lsquo;a&rsquo;
b = &lsquo;bcabc&rsquo;</li><li>Increase left part and decrease right part.<ol><li>On each step calculate sum of distinct letters. For example:
set(a) + set(b)
max_result = max(max_result, len(set(a)) + len(set(b)))</li></ol></li></ol><p><strong>Solution:</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>solve</span>():
</span></span><span style=display:flex><span>    <span style=color:#60a0b0;font-style:italic># input</span>
</span></span><span style=display:flex><span>    n <span style=color:#666>=</span> <span style=color:#007020>int</span>(<span style=color:#007020>input</span>())
</span></span><span style=display:flex><span>    s <span style=color:#666>=</span> <span style=color:#007020>input</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    point <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>    max_n <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>    a_set <span style=color:#666>=</span> <span style=color:#007020>set</span>(s[point])
</span></span><span style=display:flex><span>    b_set <span style=color:#666>=</span> <span style=color:#007020>set</span>(s[point<span style=color:#666>+</span><span style=color:#40a070>1</span>:])
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>while</span> point <span style=color:#666>&lt;</span> n <span style=color:#666>-</span> <span style=color:#40a070>1</span>:
</span></span><span style=display:flex><span>        max_n <span style=color:#666>=</span> <span style=color:#007020>max</span>(max_n, <span style=color:#007020>len</span>(a_set) <span style=color:#666>+</span> <span style=color:#007020>len</span>(b_set))
</span></span><span style=display:flex><span>        a_set<span style=color:#666>.</span>add(s[point <span style=color:#666>+</span> <span style=color:#40a070>1</span>])
</span></span><span style=display:flex><span>        b_set <span style=color:#666>=</span> <span style=color:#007020>set</span>(s[point<span style=color:#666>+</span><span style=color:#40a070>2</span>:])
</span></span><span style=display:flex><span>        point <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>if</span> max_n <span style=color:#666>==</span> n:
</span></span><span style=display:flex><span>            <span style=color:#007020;font-weight:700>break</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>return</span> max_n
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>run</span>():
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>for</span> _ <span style=color:#007020;font-weight:700>in</span> <span style=color:#007020>range</span>(inpi()):
</span></span><span style=display:flex><span>        <span style=color:#007020>print</span>(solve())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#007020;font-weight:700>if</span> __name__ <span style=color:#666>==</span> <span style=color:#4070a0>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> os<span style=color:#666>.</span>environ<span style=color:#666>.</span>get(<span style=color:#4070a0>&#34;CODE_DEBUG&#34;</span>):
</span></span><span style=display:flex><span>        sys<span style=color:#666>.</span>stdin <span style=color:#666>=</span> <span style=color:#007020>open</span>(<span style=color:#4070a0>&#34;./input.txt&#34;</span>, <span style=color:#4070a0>&#34;r&#34;</span>)
</span></span><span style=display:flex><span>        start_time <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>        run()
</span></span><span style=display:flex><span>        <span style=color:#007020>print</span>(<span style=color:#4070a0>&#34;</span><span style=color:#4070a0;font-weight:700>\n</span><span style=color:#4070a0>--- </span><span style=color:#70a0d0>%s</span><span style=color:#4070a0> seconds ---</span><span style=color:#4070a0;font-weight:700>\n</span><span style=color:#4070a0>&#34;</span> <span style=color:#666>%</span> (time<span style=color:#666>.</span>time() <span style=color:#666>-</span> start_time))
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>else</span>:
</span></span><span style=display:flex><span>        run()
</span></span></code></pre></div><p><strong>Optimization:</strong></p><p><code>b_set = set(s[point+2:])</code> is very heavy on each step in the loop.</p><p>Use <code>Counter</code> instead.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>solve</span>():
</span></span><span style=display:flex><span>    <span style=color:#60a0b0;font-style:italic># input</span>
</span></span><span style=display:flex><span>    n <span style=color:#666>=</span> <span style=color:#007020>int</span>(<span style=color:#007020>input</span>())
</span></span><span style=display:flex><span>    s <span style=color:#666>=</span> <span style=color:#007020>input</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    point <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>    max_n <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>    a <span style=color:#666>=</span> <span style=color:#007020>set</span>(s[point])
</span></span><span style=display:flex><span>    b <span style=color:#666>=</span> Counter(s[point<span style=color:#666>+</span><span style=color:#40a070>1</span>:])
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>while</span> point <span style=color:#666>&lt;</span> n <span style=color:#666>-</span> <span style=color:#40a070>1</span>:
</span></span><span style=display:flex><span>        max_n <span style=color:#666>=</span> <span style=color:#007020>max</span>(max_n, <span style=color:#007020>len</span>(a) <span style=color:#666>+</span> <span style=color:#007020>len</span>(b))
</span></span><span style=display:flex><span>        point <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>        b_letter <span style=color:#666>=</span> s[point]
</span></span><span style=display:flex><span>        a<span style=color:#666>.</span>add(b_letter)
</span></span><span style=display:flex><span>        b[b_letter] <span style=color:#666>-=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>if</span> b[b_letter] <span style=color:#666>&lt;=</span> <span style=color:#40a070>0</span>:
</span></span><span style=display:flex><span>            <span style=color:#007020;font-weight:700>del</span> b[b_letter]
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>if</span> max_n <span style=color:#666>==</span> n:
</span></span><span style=display:flex><span>            <span style=color:#007020;font-weight:700>break</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>return</span> max_n
</span></span></code></pre></div><p><strong>Explanation from Codeforces:</strong></p><p>Let&rsquo;s check all splitting points <code>𝑖</code> for all (<code>1≤𝑖≤𝑛−1</code>). We denote a splitting point as the last index of the first string we take (and all the remaining characters will go to the second string).
We need to keep a dynamic count of the number of distinct characters in both strings <code>𝑎</code> (the first string) and <code>𝑏</code> (the second string).
We can do this using two frequency arrays (and adding one to the distinct count of either string <code>𝑎</code> or <code>𝑏</code> when the frequency of a character is greater than zero.</p><h3 id=e-negatives-and-positives>E. Negatives and Positives</h3><p><a href=https://codeforces.com/contest/1791/problem/E>https://codeforces.com/contest/1791/problem/E</a></p><blockquote><p>dp, greedy, sortings, *1100</p></blockquote><p><strong>Explanation from Codeforces:</strong></p><p>We can notice that by performing any number of operations, the parity of the count of negative numbers won&rsquo;t ever change.</p><p>Thus, if the number of negative numbers is initially even, we can make it equal to 0 by performing some operations.</p><p>So, for an even count of negative numbers, the answer is the sum of the absolute values of all numbers (since we can make all of them positive). And if the count of negative numbers is odd, we must have one negative number at the end.</p><p>We will choose the one smallest by absolute value and keep the rest positive (for simplicity, we consider −0 as a negative number).</p><p><strong>Solution:</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>solve</span>():
</span></span><span style=display:flex><span>    n <span style=color:#666>=</span> inpi()
</span></span><span style=display:flex><span>    a <span style=color:#666>=</span> inpl()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    count_minus <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>    count_zeros <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>    min_val <span style=color:#666>=</span> <span style=color:#007020>abs</span>(a[<span style=color:#40a070>0</span>])
</span></span><span style=display:flex><span>    s <span style=color:#666>=</span> <span style=color:#40a070>0</span> <span style=color:#60a0b0;font-style:italic># sum</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>for</span> i <span style=color:#007020;font-weight:700>in</span> <span style=color:#007020>range</span>(n):
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>if</span> a[i] <span style=color:#666>&lt;</span> <span style=color:#40a070>0</span>:
</span></span><span style=display:flex><span>            count_minus <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>if</span> a[i] <span style=color:#666>==</span> <span style=color:#40a070>0</span>:
</span></span><span style=display:flex><span>            count_zeros <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>        v <span style=color:#666>=</span> <span style=color:#007020>abs</span>(a[i])
</span></span><span style=display:flex><span>        s <span style=color:#666>+=</span> v
</span></span><span style=display:flex><span>        min_val <span style=color:#666>=</span> <span style=color:#007020>min</span>(min_val, v)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    count_minus <span style=color:#666>=</span> count_minus <span style=color:#666>%</span> <span style=color:#40a070>2</span> <span style=color:#60a0b0;font-style:italic># if count of odd numbers is negative </span>
</span></span><span style=display:flex><span>    count_minus <span style=color:#666>-=</span> count_zeros
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> count_minus <span style=color:#666>&lt;=</span> <span style=color:#40a070>0</span>:
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>return</span> s
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> count_minus <span style=color:#666>==</span> <span style=color:#40a070>1</span>:
</span></span><span style=display:flex><span>        s <span style=color:#666>-=</span> <span style=color:#007020>abs</span>(min_val <span style=color:#666>*</span> <span style=color:#40a070>2</span>)
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>return</span> s
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>return</span> s
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>run</span>():
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>for</span> _ <span style=color:#007020;font-weight:700>in</span> <span style=color:#007020>range</span>(inpi()):
</span></span><span style=display:flex><span>        <span style=color:#007020>print</span>(solve())
</span></span><span style=display:flex><span>run()
</span></span></code></pre></div><p><strong>Optimization:</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>solve</span>():
</span></span><span style=display:flex><span>    n <span style=color:#666>=</span> inpi()
</span></span><span style=display:flex><span>    a <span style=color:#666>=</span> inpl()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    count_minus <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>for</span> i <span style=color:#007020;font-weight:700>in</span> <span style=color:#007020>range</span>(n):
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>if</span> a[i] <span style=color:#666>&lt;</span> <span style=color:#40a070>0</span>:
</span></span><span style=display:flex><span>            count_minus <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>        a[i] <span style=color:#666>=</span> <span style=color:#007020>abs</span>(a[i])
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    s <span style=color:#666>=</span> <span style=color:#007020>sum</span>(a) <span style=color:#60a0b0;font-style:italic># sum</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>if</span> count_minus <span style=color:#666>%</span> <span style=color:#40a070>2</span>:
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>return</span> s <span style=color:#666>-</span> <span style=color:#007020>min</span>(a) <span style=color:#666>*</span> <span style=color:#40a070>2</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>return</span> s
</span></span></code></pre></div><h3 id=f-range-update-point-query>F. Range Update Point Query</h3><p><a href=https://codeforces.com/contest/1791/problem/F>https://codeforces.com/contest/1791/problem/F</a></p><p>There are two types of inputs (cases) (in addition to array <code>a</code> and <code>n</code> of test cases):</p><ol><li>line with <strong>two</strong> elements: <code>2 x</code>. Starts with <code>2</code></li><li>line with <strong>three</strong> elements: <code>1 l r</code>. Starts with <code>1</code></li></ol><p>In 1st case: print array <code>a</code></p><p>In 2nd case: update the value of <code>𝑎𝑖</code> to the sum of its digits.</p><p><strong>Slow Solution:</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>sum_of_digits</span>(n):
</span></span><span style=display:flex><span>    <span style=color:#007020>sum</span> <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>while</span> n:
</span></span><span style=display:flex><span>        <span style=color:#007020>sum</span> <span style=color:#666>+=</span> n <span style=color:#666>%</span> <span style=color:#40a070>10</span>
</span></span><span style=display:flex><span>        n <span style=color:#666>//=</span> <span style=color:#40a070>10</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>return</span> <span style=color:#007020>sum</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>solve</span>():
</span></span><span style=display:flex><span>    n, q <span style=color:#666>=</span> <span style=color:#007020>map</span>(<span style=color:#007020>int</span>, <span style=color:#007020>input</span>()<span style=color:#666>.</span>split())
</span></span><span style=display:flex><span>    a <span style=color:#666>=</span> <span style=color:#007020>list</span>(<span style=color:#007020>map</span>(<span style=color:#007020>int</span>, <span style=color:#007020>input</span>()<span style=color:#666>.</span>split()))
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>while</span> q:
</span></span><span style=display:flex><span>        q <span style=color:#666>-=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>        t, <span style=color:#666>*</span>params <span style=color:#666>=</span> <span style=color:#007020>map</span>(<span style=color:#007020>int</span>, <span style=color:#007020>input</span>()<span style=color:#666>.</span>split())
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>if</span> t <span style=color:#666>==</span> <span style=color:#40a070>1</span>:
</span></span><span style=display:flex><span>            l, r <span style=color:#666>=</span> params
</span></span><span style=display:flex><span>            <span style=color:#007020;font-weight:700>for</span> i <span style=color:#007020;font-weight:700>in</span> <span style=color:#007020>range</span>(l<span style=color:#666>-</span><span style=color:#40a070>1</span>, r):
</span></span><span style=display:flex><span>                a[i] <span style=color:#666>=</span> sum_of_digits(a[i])
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>else</span>:
</span></span><span style=display:flex><span>            x, <span style=color:#666>=</span> params
</span></span><span style=display:flex><span>            <span style=color:#007020>print</span>(a[x<span style=color:#666>-</span><span style=color:#40a070>1</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>t <span style=color:#666>=</span> <span style=color:#007020>int</span>(<span style=color:#007020>input</span>()<span style=color:#666>.</span>strip())
</span></span><span style=display:flex><span><span style=color:#007020;font-weight:700>for</span> _ <span style=color:#007020;font-weight:700>in</span> <span style=color:#007020>range</span>(t): <span style=color:#60a0b0;font-style:italic># attempts</span>
</span></span><span style=display:flex><span>    solve()
</span></span></code></pre></div><p>This solution is slow because of loop:</p><pre><code>for i in range(l-1, r):
    a[i] = sum_of_digits(a[i])
</code></pre><p>The key here is the following: after the operation is applied on <strong>a<sub>i</sub></strong> thrice, it won&rsquo;t change after any further operations.</p><p>Problem here is to implement a solution how to save information how many times there was a change of <code>a[i]</code>.</p><p>One way is to use <strong>Fenwick Tree</strong></p><ol><li>Use <a href=/en/tracks/algorithms-101/data-structures/#fenwick-tree>FenwickTree template</a></li><li>Save there count of <code>a[i]</code> changes. No need to calculate more than 3 times</li><li>When need to print <code>a[x]</code> calculate up to three times and print result.</li></ol><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#007020;font-weight:700>class</span> <span style=color:#0e84b5;font-weight:700>Fenwick</span>: <span style=color:#60a0b0;font-style:italic>#also known as Binary Indexed Tree (BIT)</span>
</span></span><span style=display:flex><span>    <span style=color:#60a0b0;font-style:italic># no need to change here anything</span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>def</span> __init__(self, n):
</span></span><span style=display:flex><span>        self<span style=color:#666>.</span>n <span style=color:#666>=</span> n
</span></span><span style=display:flex><span>        self<span style=color:#666>.</span>bit <span style=color:#666>=</span> [<span style=color:#40a070>0</span>] <span style=color:#666>*</span> (n<span style=color:#666>+</span><span style=color:#40a070>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>add</span>(self, idx, val):
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>while</span> idx <span style=color:#666>&lt;=</span> self<span style=color:#666>.</span>n:
</span></span><span style=display:flex><span>            self<span style=color:#666>.</span>bit[idx] <span style=color:#666>+=</span> val
</span></span><span style=display:flex><span>            idx <span style=color:#666>+=</span> idx <span style=color:#666>&amp;</span> <span style=color:#666>-</span>idx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>add_range</span>(self, l, r, val):
</span></span><span style=display:flex><span>        self<span style=color:#666>.</span>add(l, val)
</span></span><span style=display:flex><span>        self<span style=color:#666>.</span>add(r<span style=color:#666>+</span><span style=color:#40a070>1</span>, <span style=color:#666>-</span>val)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>query</span>(self, idx):
</span></span><span style=display:flex><span>        <span style=color:#60a0b0;font-style:italic>#Calculates the sum of the elements from the beginning to idx</span>
</span></span><span style=display:flex><span>        ret <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>while</span> idx <span style=color:#666>&gt;</span> <span style=color:#40a070>0</span>:
</span></span><span style=display:flex><span>            ret <span style=color:#666>+=</span> self<span style=color:#666>.</span>bit[idx]
</span></span><span style=display:flex><span>            idx <span style=color:#666>-=</span> idx <span style=color:#666>&amp;</span> <span style=color:#666>-</span>idx
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>return</span> ret
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>range_sum</span>(self, l, r):
</span></span><span style=display:flex><span>        <span style=color:#60a0b0;font-style:italic># Return the sum of the elements from l (inclusive) to r (exclusive)</span>
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>return</span> self<span style=color:#666>.</span>prefix_sum(r <span style=color:#666>-</span> <span style=color:#40a070>1</span>) <span style=color:#666>-</span> self<span style=color:#666>.</span>prefix_sum(l <span style=color:#666>-</span> <span style=color:#40a070>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>prefix_sum</span>(self, x):
</span></span><span style=display:flex><span>        <span style=color:#60a0b0;font-style:italic># return sum upto and including element x</span>
</span></span><span style=display:flex><span>        z <span style=color:#666>=</span> x
</span></span><span style=display:flex><span>        res <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>while</span> z <span style=color:#666>&gt;=</span> <span style=color:#40a070>0</span>:
</span></span><span style=display:flex><span>            res <span style=color:#666>+=</span> self<span style=color:#666>.</span>bit[z]
</span></span><span style=display:flex><span>            <span style=color:#60a0b0;font-style:italic># Strip trailing zeros from z, and then take away one</span>
</span></span><span style=display:flex><span>            z <span style=color:#666>=</span> (z <span style=color:#666>&amp;</span> (z <span style=color:#666>+</span> <span style=color:#40a070>1</span>)) <span style=color:#666>-</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>return</span> res
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>solve</span>():
</span></span><span style=display:flex><span>    n, q <span style=color:#666>=</span> <span style=color:#007020>list</span>(<span style=color:#007020>map</span>(<span style=color:#007020>int</span>, <span style=color:#007020>input</span>()<span style=color:#666>.</span>split()))
</span></span><span style=display:flex><span>    a <span style=color:#666>=</span> <span style=color:#007020>list</span>(<span style=color:#007020>map</span>(<span style=color:#007020>int</span>, <span style=color:#007020>input</span>()<span style=color:#666>.</span>split()))
</span></span><span style=display:flex><span>    tree <span style=color:#666>=</span> BIT(n)
</span></span><span style=display:flex><span>    <span style=color:#007020;font-weight:700>while</span> q:
</span></span><span style=display:flex><span>        q <span style=color:#666>-=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span>        t, <span style=color:#666>*</span>params <span style=color:#666>=</span> <span style=color:#007020>map</span>(<span style=color:#007020>int</span>, <span style=color:#007020>input</span>()<span style=color:#666>.</span>split())
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>if</span> t <span style=color:#666>==</span> <span style=color:#40a070>1</span>:
</span></span><span style=display:flex><span>            l, r <span style=color:#666>=</span> params
</span></span><span style=display:flex><span>            tree<span style=color:#666>.</span>add(l, <span style=color:#40a070>1</span>)
</span></span><span style=display:flex><span>            tree<span style=color:#666>.</span>add(r <span style=color:#666>+</span> <span style=color:#40a070>1</span>, <span style=color:#666>-</span><span style=color:#40a070>1</span>)
</span></span><span style=display:flex><span>        <span style=color:#007020;font-weight:700>else</span>:
</span></span><span style=display:flex><span>            x, <span style=color:#666>=</span> params
</span></span><span style=display:flex><span>            need <span style=color:#666>=</span> <span style=color:#007020>min</span>(<span style=color:#40a070>3</span>, tree<span style=color:#666>.</span>query(x)) <span style=color:#60a0b0;font-style:italic># get count of times need to change a[i]</span>
</span></span><span style=display:flex><span>            cur <span style=color:#666>=</span> a[x <span style=color:#666>-</span> <span style=color:#40a070>1</span>]
</span></span><span style=display:flex><span>            <span style=color:#007020;font-weight:700>for</span> i <span style=color:#007020;font-weight:700>in</span> <span style=color:#007020>range</span>(need):
</span></span><span style=display:flex><span>                cur <span style=color:#666>=</span> sum_of_digits(cur)
</span></span><span style=display:flex><span>            <span style=color:#007020>print</span>(cur)
</span></span></code></pre></div><p><strong>Good to know</strong></p><ul><li><a href=../data-structures/segment-tree>Segment Tree template tutorial</a></li><li><a href=https://medium.com/carpanese/a-visual-introduction-to-fenwick-tree-89b82cac5b3c>A Visual Introduction to Fenwick Tree | medium</a></li><li><a href=https://cp-algorithms.com/data_structures/fenwick.html>Fenwick Tree | cp-algorithms</a></li><li><a href=https://cp-algorithms.com/data_structures/segment_tree.html>Segment Tree | cp-algorithms</a></li><li><a href=https://ru.algorithmica.org/cs/segment-tree/>Дерево отрезков | algorithmica</a></li><li><a href=https://ru.algorithmica.org/cs/range-queries/fenwick/>Дерево Фенвика | algorithmica</a></li><li><a href=https://habr.com/ru/post/112828/>Дерево Фенвика | habr</a></li></ul><h3 id=todo-g1-teleporters-easy-version>TODO G1. Teleporters (Easy Version)</h3><p><a href=https://codeforces.com/contest/1791/problem/G1>https://codeforces.com/contest/1791/problem/G1</a></p><h3 id=todo-g2-teleporters-hard-version>TODO G2. Teleporters (Hard Version)</h3><p><a href=https://codeforces.com/contest/1791/problem/G2>https://codeforces.com/contest/1791/problem/G2</a></p></article><div class="-mx-2 mt-4 flex flex-col border-t border-b pb-1 px-2 pt-4 md:flex-row md:justify-between"><div><span class="text-primary-text block font-bold">Previous</span>
<a href=https://romankurnovskii.com/en/tracks/algorithms-101/codeforces/cp-template/ class=block>Python template for contests</a></div><div class="mt-4 md:mt-0 md:text-right"></div></div><div id=open_comments_block></div><script src=/opencomments.js renderdivid=open_comments_block server=https://eyt4njm3se.execute-api.eu-west-1.amazonaws.com/comments awstag defer></script></div><div class="hidden lg:block lg:w-1/4"><div class="bg-primary-bg prose sticky top-7 z-10 hidden
px-6 lg:block"><h3 class=text-lg>On This Page</h3></div><div class="sticky-toc hidden px-0 pb-6 lg:block"><nav id=TableOfContents><ul><li><ul><li><a href=#a-codeforces-checking>A. Codeforces Checking</a></li><li><a href=#b-following-directions>B. Following Directions</a></li><li><a href=#c-prepend-and-append>C. Prepend and Append</a></li><li><a href=#d-distinct-split>D. Distinct Split</a></li><li><a href=#e-negatives-and-positives>E. Negatives and Positives</a></li><li><a href=#f-range-update-point-query>F. Range Update Point Query</a></li><li><a href=#todo-g1-teleporters-easy-version>TODO G1. Teleporters (Easy Version)</a></li><li><a href=#todo-g2-teleporters-hard-version>TODO G2. Teleporters (Hard Version)</a></li></ul></li></ul></nav><div class="feedback-links mt-4 text-sm"><hr><div><a href=https://github.com/romankurnovskii/romankurnovskii.github.io/edit/main/content/tracks/algorithms-101/codeforces/849-div-4-1791.en.md title="Edit this page" target=_blank><i class="fas fa-edit me-1"></i>
<span>Edit this page</span></a></div><div><a href="https://github.com/romankurnovskii/romankurnovskii.github.io/issues/new/?body=File:%20[/content/tracks/algorithms-101/codeforces/849-div-4-1791.en.md/]%28/https:/romankurnovskii.com/en/tracks/algorithms-101/codeforces/849-div-4-1791/%29" title="Request issue" target=_blank><i class="fas fa-check me-1" aria-hidden=true></i>
<span>Request page change</span></a></div></div></div><script>window.addEventListener("DOMContentLoaded",()=>{enableStickyToc()})</script></div></div></div></div></div><script>document.addEventListener("DOMContentLoaded",()=>{changeSidebarHeight(),switchDocToc()})</script></div></div></main><footer class=pl-scrollbar><div class="mx-auto w-full max-w-screen-xl"><div class="text-center p-6 pin-b"><p class="text-sm text-tertiary-text">&copy; 2023 <a href=https://romankurnovskii.com>Roman Kurnovskii</a> personal page
&#183;
<a href=https://romankurnovskii.com/en/index.xml target=_blank>RSS</a> &#183;
<a href=https://gohugo.io>Hugo</a> &#183;
Updated <a href=https://github.com/romankurnovskii/romankurnovskii.github.io/commit/8e3ff39 target=_blank>2023-02-11</a></p></div><script src=/js/lunr.stemmer.support.min.js></script>
<script src=/js/lunr.ru.min.js></script>
<script src=/js/lunr.multi.min.js></script>
<script src=/js/search.js?v2 languagemode=en></script><div id=search-result tabindex=-1 class="overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 max-w-xs" hidden><div class="relative p-4 w-full max-w-xs h-full md:h-auto"><div class="relative bg-white rounded-lg shadow dark:bg-gray-700"><div class=p-6><h3>Search results</h3><div id=popup_search_results class=prose></div></div></div></div></div><script src=/js/search-page.js?v3></script>
<script src=/js/base.js?7 languagemode=en></script></div></footer><script src=https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js defer></script>
<script src=/js/zoom-image/placeholders.js?4 defer></script>
<script src=/js/zoom-image/index.js?4 defer></script></body></html>