<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>User Management on Roman Kurnovskii</title><link>https://romankurnovskii.com/en/tags/user-management/</link><description>Recent content in User Management on Roman Kurnovskii</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>&amp;copy; 2025</copyright><lastBuildDate>Thu, 24 Aug 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://romankurnovskii.com/en/tags/user-management/index.xml" rel="self" type="application/rss+xml"/><item><title>Interactive vs. Non-Interactive Users in Linux</title><link>https://romankurnovskii.com/en/posts/linux-interactive-non-interactive-users/</link><pubDate>Thu, 24 Aug 2023 00:00:00 +0000</pubDate><guid>https://romankurnovskii.com/en/posts/linux-interactive-non-interactive-users/</guid><description>&lt;h2 id="characteristics">Characteristics&lt;/h2>
&lt;p>In a Linux environment, users can be broadly categorized as &amp;ldquo;interactive&amp;rdquo; and &amp;ldquo;non-interactive&amp;rdquo;. These distinctions stem from how these user accounts interact (or don&amp;rsquo;t interact) with the system.&lt;/p>
&lt;h2 id="definition">Definition&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>Interactive Users:&lt;/strong> These are users who interact directly with the system, usually through a shell. When you log into a computer using SSH or a terminal, you&amp;rsquo;re operating as an interactive user.&lt;/li>
&lt;li>&lt;strong>Non-Interactive Users:&lt;/strong> These users are designed to perform specific tasks without direct human intervention. Examples include system accounts running services like &lt;em>apache&lt;/em> or &lt;em>mysql&lt;/em>.&lt;/li>
&lt;/ul>
&lt;h2 id="interaction-usage-environment">Interaction, Usage, Environment&lt;/h2>
&lt;p>&lt;strong>Interaction:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Interactive: Engages with the system via interfaces like shells.&lt;/li>
&lt;li>Non-Interactive: Executes tasks automatically, often without a shell or user interface.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Usage:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Interactive: Utilized for general-purpose tasks, from browsing directories to installing software.&lt;/li>
&lt;li>Non-Interactive: Specific to particular duties, often system-related.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Environment:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Interactive: Has a full user environment. This includes a &lt;code>HOME&lt;/code> directory, user-specific settings, etc.&lt;/li>
&lt;li>Non-Interactive: Limited or no user environment. Typically lacks things like a &lt;code>HOME&lt;/code> directory.&lt;/li>
&lt;/ul>
&lt;h2 id="creating-user">Creating user&lt;/h2>
&lt;p>When creating users in Linux, there&amp;rsquo;s often no distinction between interactive and non-interactive users. The difference arises in &lt;mark>how the user is utilized&lt;/mark>. However, for security and operational reasons, non-interactive users might have restricted shells or no shell at all.&lt;/p>
&lt;p>&lt;strong>Why Not Simply Create a User and Use It Non-Interactively?&lt;/strong>&lt;/p>
&lt;p>Even if a user is created as interactive, it can be used non-interactively. However, for security reasons, services or tasks might be assigned to users with restricted permissions or shells to minimize potential risks.&lt;/p>
&lt;h2 id="practice">Practice&lt;/h2>
&lt;h3 id="manual">Manual&lt;/h3>
&lt;p>Create a file &lt;code>Dockerfile&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2;">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#007020;font-weight:bold">FROM&lt;/span>&lt;span style="color:#4070a0"> ubuntu:20.04&lt;/span>&lt;span style="">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="">&lt;/span>&lt;span style="color:#60a0b0;font-style:italic">## Create interactive and non-interactive users&lt;/span>&lt;span style="">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="">&lt;/span>&lt;span style="color:#007020;font-weight:bold">RUN&lt;/span> useradd interactiveUser &lt;span style="color:#666">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#4070a0;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4070a0;font-weight:bold">&lt;/span> useradd -s /sbin/nologin noninteractiveUser&lt;span style="">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Build image&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>docker build -t custom-users-ubuntu .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Connect/Switch to each user:&lt;/strong>&lt;/p>
&lt;p>For interactiveUser:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>❯ docker run -it custom-users-ubuntu su - interactiveUser
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>su: warning: cannot change directory to /home/interactiveUser: No such file or directory
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ id
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bb60d5">uid&lt;/span>&lt;span style="color:#666">=&lt;/span>1000&lt;span style="color:#666">(&lt;/span>interactiveUser&lt;span style="color:#666">)&lt;/span> &lt;span style="color:#bb60d5">gid&lt;/span>&lt;span style="color:#666">=&lt;/span>1000&lt;span style="color:#666">(&lt;/span>interactiveUser&lt;span style="color:#666">)&lt;/span> &lt;span style="color:#bb60d5">groups&lt;/span>&lt;span style="color:#666">=&lt;/span>1000&lt;span style="color:#666">(&lt;/span>interactiveUser&lt;span style="color:#666">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>For noninteractiveUser (This will not give a shell because of the nologin shell):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>❯ docker run -it custom-users-ubuntu su - noninteractiveUser
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>su: warning: cannot change directory to /home/noninteractiveUser: No such file or directory
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>This account is currently not available.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Verify that noninteractiveUser exists:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>❯ docker run -it custom-users-ubuntu bash
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>root@495500b9c069:/## cat /etc/passwd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>root:x:0:0:root:/root:/bin/bash
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>interactiveUser:x:1000:1000::/home/interactiveUser:/bin/sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>noninteractiveUser:x:1001:1001::/home/noninteractiveUser:/sbin/nologin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Run commands for each user:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>You&amp;rsquo;ll find that the interactiveUser can run commands, but the noninteractiveUser cannot due to its restricted shell.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Show difference in environments:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>❯ docker run -it custom-users-ubuntu /bin/bash -c &lt;span style="color:#4070a0">&amp;#34;su - interactiveUser -c env &amp;gt; /tmp/interactiveEnv; su - noninteractiveUser -c env &amp;gt; /tmp/noninteractiveEnv; diff /tmp/interactiveEnv /tmp/noninteractiveEnv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>su: warning: cannot change directory to /home/interactiveUser: No such file or directory
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>su: warning: cannot change directory to /home/noninteractiveUser: No such file or directory
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>1,8c1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt; &lt;span style="color:#bb60d5">MAIL&lt;/span>&lt;span style="color:#666">=&lt;/span>/var/mail/interactiveUser
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt; &lt;span style="color:#bb60d5">USER&lt;/span>&lt;span style="color:#666">=&lt;/span>interactiveUser
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt; &lt;span style="color:#bb60d5">HOME&lt;/span>&lt;span style="color:#666">=&lt;/span>/home/interactiveUser
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt; &lt;span style="color:#bb60d5">LOGNAME&lt;/span>&lt;span style="color:#666">=&lt;/span>interactiveUser
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt; &lt;span style="color:#bb60d5">TERM&lt;/span>&lt;span style="color:#666">=&lt;/span>xterm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt; &lt;span style="color:#bb60d5">PATH&lt;/span>&lt;span style="color:#666">=&lt;/span>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt; &lt;span style="color:#bb60d5">SHELL&lt;/span>&lt;span style="color:#666">=&lt;/span>/bin/sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt; &lt;span style="color:#bb60d5">PWD&lt;/span>&lt;span style="color:#666">=&lt;/span>/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;gt; This account is currently not available.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>