<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Ec2 on Roman Kurnovskii</title><link>https://romankurnovskii.com/en/tags/ec2/</link><description>Recent content in Ec2 on Roman Kurnovskii</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>&amp;copy; 2025</copyright><lastBuildDate>Tue, 25 Apr 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://romankurnovskii.com/en/tags/ec2/index.xml" rel="self" type="application/rss+xml"/><item><title>EC2</title><link>https://romankurnovskii.com/en/tracks/aws-certified-developer-associate/ec2/</link><pubDate>Sat, 10 Sep 2022 00:00:00 +0000</pubDate><guid>https://romankurnovskii.com/en/tracks/aws-certified-developer-associate/ec2/</guid><description>&lt;h2 id="about">About&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://aws.amazon.com/ec2/">AWS EC2&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.aws.amazon.com/ec2/?id=docs_gateway">AWS EC2 User Guide&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Amazon Elastic Compute Cloud (EC2) - one of the most popular AWS services.&lt;/p>
&lt;p>Allows:&lt;/p>
&lt;ul>
&lt;li>to run different types of cloud instances and pay-per-use models.&lt;/li>
&lt;li>to control computing resources at the operating system level&lt;/li>
&lt;li>working in an Amazon computing environment.&lt;/li>
&lt;/ul>
&lt;h2 id="digest">Digest&lt;/h2>
&lt;ul>
&lt;li>EC2 &amp;amp; EBS&lt;/li>
&lt;li>EC2 (Elastic Compute Cloud) Instance&lt;/li>
&lt;li>EBS (Elastic Block Store) - Persistent storage volume&lt;/li>
&lt;li>AMI (Amazon Machine Image) - Packages OS and additional installations in a reusable template&lt;/li>
&lt;li>Instance and Instance Types: General Purpose (t-type and m-type), Compute Optimized(c-type), GPU Graphics, GPU Compute, Memory Optimized(r, Ã— and z-type), and Storage Optimized(d, h and i-type)&lt;/li>
&lt;li>Purchasing Options: On Demand, Reserved, Scheduled, Spot, Dedicated Instance and Dedicated Host&lt;/li>
&lt;li>Spot: Partial hours are not billed if terminated by AWS EC2&lt;/li>
&lt;li>Secure login information for your instances using key pairs&lt;/li>
&lt;li>Placement group: Cluster and Spread&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>For root:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>General purpose SSD (balances price &amp;amp; performance)&lt;/li>
&lt;li>Provisioned OPS SD (Highest performance for mission critical low-latency or high throughput workloads)&lt;/li>
&lt;li>Magnetic HDD (previous generation)&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>For other:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Throughput Provisioned HDD (low cost for frequently accessed, throughput intensive workloads)&lt;/li>
&lt;li>Cold HDD (lowest cost for less frequently workloads)&lt;/li>
&lt;li>Instance Store - temporary storage volume in which data is deleted when you STOP or TERMINATE your instance&lt;/li>
&lt;/ul>
&lt;h2 id="price">Price&lt;/h2>
&lt;p>&lt;strong>Pricing models:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>On Demand - pay a fixed rate by the hour/second with no commitment. You can provision and terminate it at any given time.&lt;/li>
&lt;li>Reserved - you get capacity reservation, basically purchase an instance for a fixed time of period. The longer, the cheaper.&lt;/li>
&lt;li>Spot - Enables you to bid whatever price you want for instances or pay the spot price. Dedicated Hosts - physical EC2 server dedicated for your use.&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="https://aws.amazon.com/ec2/pricing/">Current price&lt;/a>&lt;/p>
&lt;h2 id="practice">Practice&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/Lng4wP26_nk?autoplay=0&amp;amp;controls=1&amp;amp;end=0&amp;amp;loop=0&amp;amp;mute=0&amp;amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video">&lt;/iframe>
&lt;/div>
&lt;h3 id="tldr">TL;DR&lt;/h3>
&lt;ol>
&lt;li>Choose a region close to you&lt;/li>
&lt;li>Go to EC2 service&lt;/li>
&lt;li>Click on &amp;ldquo;Instances&amp;rdquo; in the menu and click on &amp;ldquo;Launch instances&amp;rdquo;&lt;/li>
&lt;li>Choose image: Amazon Linux 2&lt;/li>
&lt;li>Choose instance type: t2.micro&lt;/li>
&lt;li>Make sure &amp;ldquo;Delete on Termination&amp;rdquo; is checked in the storage section&lt;/li>
&lt;li>Under the &amp;ldquo;User data&amp;rdquo; field the following:&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>yum update -y
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>yum install -y httpd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>systemctl start httpd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>systemctl &lt;span style="color:#007020">enable&lt;/span> httpd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#007020">echo&lt;/span> &lt;span style="color:#4070a0">&amp;#34;&amp;lt;h1&amp;gt;Hello from web!&amp;lt;/h1&amp;gt;&amp;#34;&lt;/span> &amp;gt; /var/www/html/index.html
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="8">
&lt;li>Add tags with the following keys and values:&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>key &amp;ldquo;Type&amp;rdquo; and the value &amp;ldquo;web&amp;rdquo;&lt;/li>
&lt;li>key &amp;ldquo;Name&amp;rdquo; and the value &amp;ldquo;web-1&amp;rdquo;&lt;/li>
&lt;/ul>
&lt;ol start="9">
&lt;li>In the security group section, add a rule to accept HTTP traffic (TCP) on port 80 from anywhere&lt;/li>
&lt;li>Click on &amp;ldquo;Review&amp;rdquo; and then click on &amp;ldquo;Launch&amp;rdquo; after reviewing.&lt;/li>
&lt;li>If you don&amp;rsquo;t have a key pair, create one and download it.&lt;/li>
&lt;li>Now HTTP traffic (port 80) should be accepted from anywhere&lt;/li>
&lt;/ol>
&lt;h3 id="create-an-ec2-instance">Create an EC2 Instance&lt;/h3>
&lt;p>Go to &lt;a href="https://us-west-2.console.aws.amazon.com/ec2/v2/home?region=us-west-2">EC2 page&lt;/a> -&amp;gt; Launch Instance&lt;/p>
&lt;p>&lt;p class="md__image">
&lt;img
src="./img/01.png"
id="zoom-default"
alt="01.png"
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;h4 id="ec2-image">EC2 image&lt;/h4>
&lt;p>Choose the image we want
&lt;p class="md__image">
&lt;img
src="./img/02.png"
id="zoom-default"
alt=""
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;h4 id="create-keys">Create keys&lt;/h4>
&lt;p>Let&amp;rsquo;s create a key to use to connect to the instance externally&lt;/p>
&lt;p>&lt;p class="md__image">
&lt;img
src="./img/03.png"
id="zoom-default"
alt=""
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;p>Enter any name you want. Leave all other parameters by default&lt;/p>
&lt;p>&lt;p class="md__image">
&lt;img
src="./img/04.png"
id="zoom-default"
alt=""
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;p>After the key is created it will start automatic downloading. You need it to connect to EC2 from your local terminal&lt;/p>
&lt;h4 id="network-settings">Network Settings&lt;/h4>
&lt;p>Under &lt;strong>Network Settings&lt;/strong> I leave &lt;strong>Allow SSH traffic from&lt;/strong>&lt;/p>
&lt;p>&lt;p class="md__image">
&lt;img
src="./img/05.png"
id="zoom-default"
alt=""
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;h4 id="create">Create&lt;/h4>
&lt;p>Click &lt;strong>Launch Instance&lt;/strong>&lt;/p>
&lt;p>The Instance has been created and is available for connection&lt;/p>
&lt;p>&lt;p class="md__image">
&lt;img
src="./img/06.png"
id="zoom-default"
alt=""
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;h3 id="connecting-to-ec2-from-the-terminal">Connecting to EC2 from the terminal&lt;/h3>
&lt;p>Connect to EC2 from a local terminal&lt;/p>
&lt;p>Let&amp;rsquo;s move previously created and downloaded &lt;mark>mykey&lt;/mark> key to home folder of current user and give permissions to file &lt;code>CHMOD 400&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#007020">cd&lt;/span> ~
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#007020">cd&lt;/span> Downloads/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mv mykey.pem &lt;span style="color:#bb60d5">$HOME&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#007020">cd&lt;/span> ..
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chmod &lt;span style="color:#40a070">400&lt;/span> mykey.pem
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;p class="md__image">
&lt;img
src="./img/07.png"
id="zoom-default"
alt=""
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;p>To connect, we need a public iPv4 address. Find it on the instance page&lt;/p>
&lt;p>&lt;p class="md__image">
&lt;img
src="./img/08.png"
id="zoom-default"
alt=""
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;p>Connect with the command &lt;code>ssh&lt;/code>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>ssh -i mykey.pem ec2-user@52.24.109.78
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;p class="md__image">
&lt;img
src="./img/03.png"
id="zoom-default"
alt=""
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;h2 id="questions">Questions&lt;/h2>
&lt;h3 id="q1">Q1&lt;/h3>
&lt;p>&lt;strong>A company is migrating a legacy application to Amazon EC2. The application uses a username and password stored in the source code to connect to a MySQL database. The database will be migrated to an Amazon RDS for MySQL DB instance. As part of the migration, the company wants to implement a secure way to store and automatically rotate the database credentials.&lt;/strong>&lt;/p>
&lt;p>&lt;strong>Which approach meets these requirements?&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>Store the database credentials in environment variables in an Amazon Machine Image (AMI). Rotate the credentials by replacing the AMI.&lt;/li>
&lt;li>Store the database credentials in AWS Systems Manager Parameter Store. Configure Parameter Store to automatically rotate the credentials.&lt;/li>
&lt;li>Store the database credentials in environment variables on the EC2 instances. Rotate the credentials by relaunching the EC2 instances.&lt;/li>
&lt;li>Store the database credentials in AWS Secrets Manager. Configure Secrets Manager to automatically rotate the credentials&lt;/li>
&lt;/ol>
&lt;details>
&lt;summary>Explanation&lt;/summary>
&lt;div>
&lt;p>&lt;a href="https://aws.amazon.com/secrets-manager/">AWS Secrets Manager&lt;/a>&lt;/p>
&lt;p>Secrets Manager offers &lt;a href="https://aws.amazon.com/blogs/security/rotate-amazon-rds-database-credentials-automatically-with-aws-secrets-manager/">secret rotation&lt;/a>&lt;/p>
&lt;p>&lt;mark style="color:white">4&lt;/mark>&lt;/p>
&lt;/div>
&lt;/details>
&lt;h3 id="q2">Q2&lt;/h3>
&lt;p>&lt;strong>An organization needs to provision a new Amazon EC2 instance with a persistent block storage volume to migrate data from its on-premises network to AWS. The required maximum performance for the storage volume is 64,000 IOPS.&lt;/strong>&lt;/p>
&lt;p>&lt;strong>In this scenario, which of the following can be used to fulfill this requirement?&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>Directly attach multiple Instance Store volumes in an EC2 instance to deliver maximum IOPS performance.&lt;/li>
&lt;li>Launch a Nitro-based EC2 instance and attach a Provisioned IOPS SSD EBS volume (io1) with 64,000 IOPS.&lt;/li>
&lt;li>Launch an Amazon EFS file system and mount it to a Nitro-based Amazon EC2 instance and set the performance mode to Max I/O.&lt;/li>
&lt;li>Launch any type of Amazon EC2 instance and attach a Provisioned IOPS SSD EBS volume (io1) with 64,000 IOPS.&lt;/li>
&lt;/ol>
&lt;details>
&lt;summary>Explanation&lt;/summary>
&lt;div>
&lt;p>An Amazon EBS volume is a durable, block-level storage device that you can attach to your instances. After you attach a volume to an instance, you can use it as you would use a physical hard drive. EBS volumes are flexible.&lt;/p>
&lt;p>The AWS Nitro System is the underlying platform for the latest generation of EC2 instances that enables AWS to innovate faster, further reduce the cost of the customers, and deliver added benefits like increased security and new instance types.&lt;/p>
&lt;p>Amazon EBS is a persistent block storage volume. It can persist independently from the life of an instance. Since the scenario requires you to have an EBS volume with up to 64,000 IOPS, you have to launch a Nitro-based EC2 instance.&lt;/p>
&lt;p>&lt;a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-volume-types.html#EBSVolumeTypes_piops">Amazon EBS volume types&lt;/a>&lt;/p>
&lt;p>&lt;mark style="color:white">2&lt;/mark>&lt;/p>
&lt;/div>
&lt;/details>
&lt;h3 id="q3">Q3&lt;/h3>
&lt;p>&lt;strong>A Database Specialist manages an EBS-Optimized Amazon RDS for MySQL DB instance with Provisioned IOPS storage. The users recently raised a database IO latency issue during peak hours when it was always under a heavy workload. Upon review, the Specialist noticed that the RDS DB instance was barely using the maximum IOPS configured but was fully utilizing the maximum bandwidth for the required throughput. CloudWatch metrics showed that CPU and Memory utilization were at optimum levels.&lt;/strong>&lt;/p>
&lt;p>&lt;strong>Which action should the Database Specialist take to fix the performance issue?&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>Change the underlying EBS storage type of the instance to General Purpose (SSD).&lt;/li>
&lt;li>Modify the DB instance to an EBS-Optimized instance class with higher maximum bandwidth.&lt;/li>
&lt;li>Disable EBS optimization on the MySQL DB instance to allow higher maximum bandwidth.&lt;/li>
&lt;li>Modify the DB instance to increase the size and corresponding Provisioned IOPS allocated to the storage.&lt;/li>
&lt;/ol>
&lt;details>
&lt;summary>Explanation&lt;/summary>
&lt;div>
&lt;p>Amazon RDS volumes are built using Amazon EBS volumes, except for Amazon Aurora, which uses an SSD-backed virtualized storage layer purpose-built for database workloads. RDS currently supports both magnetic and SSD-based storage volume types. There are two supported Amazon EBS SSD-based storage types, Provisioned IOPS (called io1) and General Purpose (called gp2).&lt;/p>
&lt;p>Provisioned IOPS storage is a storage type that delivers predictable performance and consistently low latency. If your workload is I/O constrained, using Provisioned IOPS SSD storage can increase the number of I/O requests that the system can process concurrently.&lt;/p>
&lt;p>Provisioned IOPS SSD storage provides a way to reserve I/O capacity by specifying IOPS. However, as with any other system capacity attribute, its maximum throughput under load is constrained by the resource that is consumed first. That resource might be network bandwidth, CPU, memory, or database internal resources.&lt;/p>
&lt;p>EBSâ€“optimized instances deliver dedicated bandwidth to Amazon EBS. When attached to an EBSâ€“optimized instance, Provisioned IOPS SSD (io1) volumes are designed to achieve their provisioned performance, 99.9% of the time. Choose an EBSâ€“optimized instance that provides more dedicated Amazon EBS throughput than your application needs; otherwise, the connection between Amazon EBS and Amazon EC2 can become a performance bottleneck.&lt;/p>
&lt;p>&lt;mark style="color:white">2&lt;/mark>&lt;/p>
&lt;/div>
&lt;/details>
&lt;h3 id="q4">Q4&lt;/h3>
&lt;p>&lt;strong>A developer deployed an application to an Amazon EC2 instance. The application needs to know the public IPv4 address of the instance.&lt;/strong>&lt;/p>
&lt;p>&lt;strong>How can the application find this information?&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>Query the instance metadata from &lt;a href="http://169.254.169.254/latest/meta-data/">http://169.254.169.254/latest/meta-data/&lt;/a>.&lt;/li>
&lt;li>Query the instance user data from &lt;a href="http://169.254.169.254/latest/user-data/">http://169.254.169.254/latest/user-data/&lt;/a>.&lt;/li>
&lt;li>Query the Amazon Machine Image (AMI) information from &lt;a href="http://169.254">http://169.254&lt;/a> 169.254/latest/meta-data/ami/.&lt;/li>
&lt;li>Check the hosts file of the operating system.&lt;/li>
&lt;/ol>
&lt;details>
&lt;summary>Explanation&lt;/summary>
&lt;div>
&lt;p>&lt;mark style="color:white">1&lt;/mark>&lt;/p>
&lt;/div>
&lt;/details>
&lt;h3 id="q5">Q5&lt;/h3>
&lt;p>&lt;strong>You are configuring a Jenkins project that is installed on an Amazon &lt;a href="../ec2">EC2&lt;/a> instance running a Windows operating system. You want this Jenkins project to integrate with AWS CodePipeline.&lt;/strong>&lt;/p>
&lt;p>&lt;strong>Which actions should you take to make this function perform correctly? (2 answers)&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>Restart all Amazon &lt;a href="../ec2">EC2&lt;/a> instances that are running a Windows operating system.&lt;/li>
&lt;li>Provide the IAM user credentials to integrate AWS CodePipeline.&lt;/li>
&lt;li>Fill out the required fields for your proxy host.&lt;/li>
&lt;li>Modify the PATH variable to include the directory where you installed Jenkins on all Amazon &lt;a href="../ec2">EC2&lt;/a> instance that are running a Windows operating system.&lt;/li>
&lt;/ol>
&lt;details>
&lt;summary>Explanation&lt;/summary>
&lt;div>
&lt;p>&lt;a href="https://docs.aws.amazon.com/codepipeline/latest/userguide/tutorials-four-stage-pipeline.html">https://docs.aws.amazon.com/codepipeline/latest/userguide/tutorials-four-stage-pipeline.html&lt;/a>&lt;/p>
&lt;p>&lt;mark style="color:white">2, 3&lt;/mark>&lt;/p>
&lt;/div>
&lt;/details>
&lt;h2 id="resources">Resources&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://catalog.us-east-1.prod.workshops.aws/workshops/8efd4edb-2b91-49fd-b1b8-3e3b5e71aa03/en-US/ec2/ec2linux">EC2 Linux Hands-On Lab&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://aws.amazon.com/ebs/faqs/">EB FAQ&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://tutorialsdojo.com/amazon-elastic-compute-cloud-amazon-ec2/">EC2 Digest&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://tutorialsdojo.com/amazon-ebs/">EB Digest&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="community-posts">Community posts&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://dev.to/romankurnovskii/aws-ec2-cheat-sheet-2mhp">https://dev.to/romankurnovskii/aws-ec2-cheat-sheet-2mhp&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Setup OpenVPN Server on AWS EC2 Ubuntu</title><link>https://romankurnovskii.com/en/stories/002-openvpn-aws-ec2-setup/</link><pubDate>Tue, 25 Apr 2023 00:00:00 +0000</pubDate><guid>https://romankurnovskii.com/en/stories/002-openvpn-aws-ec2-setup/</guid><description>&lt;p>Today, I embarked on a journey to create an accessible, affordable, and easy-to-use VPN solution that anyone can set up on their devices using AWS.&lt;/p>
&lt;p>Finding a reasonably priced solution was critical. I opted for Amazon&amp;rsquo;s &lt;code>t3a.nano&lt;/code> ARM Ubuntu image, which costs &lt;strong>~$0.0047&lt;/strong>/hour ~ &lt;strong>$3.8&lt;/strong>/month.&lt;/p>
&lt;p>Various Amazon EC2 instances and their prices are listed on &lt;a href="https://aws.amazon.com/ec2/pricing/on-demand/">Amazon&amp;rsquo;s On-Demand Pricing page&lt;/a>.&lt;/p>
&lt;p>Here is the &lt;a href="https://cloud-images.ubuntu.com/query/bionic/server/released.current.txt">list of all Ubuntu AMI images&lt;/a> to identify the appropriate image for the project. The selected image combined with the CloudFormation template, which was inspired by the &lt;a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-general.html">AWS CloudFormation General Reference&lt;/a>, provides a seamless and consistent user experience.&lt;/p>
&lt;p>Now it takes 2-3 minutes to create OpenVPN server using this &lt;a href="https://github.com/romankurnovskii/openvpn_ec2_cf_template">repo&lt;/a>.&lt;/p></description></item></channel></rss>