<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Git on Roman Kurnovskii</title><link>https://romankurnovskii.com/en/tags/git/</link><description>Recent content in Git on Roman Kurnovskii</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>&amp;copy; 2025</copyright><lastBuildDate>Sun, 01 Jan 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://romankurnovskii.com/en/tags/git/index.xml" rel="self" type="application/rss+xml"/><item><title>Git snippets</title><link>https://romankurnovskii.com/en/posts/git-snippets/</link><pubDate>Sun, 01 Jan 2023 00:00:00 +0000</pubDate><guid>https://romankurnovskii.com/en/posts/git-snippets/</guid><description>&lt;h2 id="commits">Commits&lt;/h2>
&lt;p>More info about &lt;a href="https://romankurnovskii.com/en/posts/code-style/">commits style&lt;/a>&lt;/p>
&lt;h2 id="github-actions">Github Actions&lt;/h2>
&lt;h3 id="submodules-sync">Submodules Sync&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#062873;font-weight:bold">name&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#4070a0">&amp;#39;Submodules Sync&amp;#39;&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#062873;font-weight:bold">on&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#062873;font-weight:bold">schedule&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>- &lt;span style="color:#062873;font-weight:bold">cron&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#4070a0">&amp;#34;0 * * * *&amp;#34;&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#062873;font-weight:bold">jobs&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#062873;font-weight:bold">sync&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#062873;font-weight:bold">runs-on&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>ubuntu-latest&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#062873;font-weight:bold">steps&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#60a0b0;font-style:italic"># Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>- &lt;span style="color:#062873;font-weight:bold">uses&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>actions/checkout@v2&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#062873;font-weight:bold">with&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#062873;font-weight:bold">submodules&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">true&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>- &lt;span style="color:#062873;font-weight:bold">name&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>Pull &amp;amp; update submodules recursively&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#062873;font-weight:bold">run&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>|&lt;span style="color:#4070a0;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4070a0;font-style:italic"> git pull --recurse-submodules
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4070a0;font-style:italic"> git submodule update --remote --recursive&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>- &lt;span style="color:#062873;font-weight:bold">name&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>Commit &amp;amp; push changes&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#062873;font-weight:bold">run&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>|&lt;span style="color:#4070a0;font-style:italic">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4070a0;font-style:italic"> git config --global user.name &amp;#39;Git bot&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4070a0;font-style:italic"> git config --global user.email &amp;#39;bot@noreply.github.com&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4070a0;font-style:italic"> git commit -am &amp;#34;Auto updated submodule references&amp;#34; &amp;amp;&amp;amp; git push || echo &amp;#34;No changes to commit&amp;#34;&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="free-space-in-git-repo">Free space in git repo&lt;/h2>
&lt;p>&lt;a href="https://rtyley.github.io/bfg-repo-cleaner/">Download BFG&lt;/a>&lt;/p>
&lt;p>or&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>wget https://repo1.maven.org/maven2/com/madgag/bfg/1.14.0/bfg-1.14.0.jar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Remove &lt;em>history&lt;/em> files bigger than 100Kb:&lt;/p>
&lt;pre>&lt;code>cd repo
java -jar bfg-1.14.0.jar --strip-blobs-bigger-than 100K .
git reflog expire --expire=now --all &amp;amp;&amp;amp; git gc --prune=now --aggressive
&lt;/code>&lt;/pre>
&lt;h3 id="removing-an-entire-commit">Removing an entire commit&lt;/h3>
&lt;p>Replace &amp;ldquo;SHA&amp;rdquo; with the reference you want to get rid of. The &amp;ldquo;^&amp;rdquo; in that command is literal.&lt;/p>
&lt;pre>&lt;code>git rebase -p --onto SHA^ SHA
&lt;/code>&lt;/pre>
&lt;p>We want to remove commits 2 &amp;amp; 4 from the repo. (Higher the the number newer the commit; 0 is the oldest commit and 4 is the latest commit)&lt;/p>
&lt;pre>&lt;code>commit 0 : b3d92c5
commit 1 : 2c6a45b
commit 2 : &amp;lt;any_hash&amp;gt;
commit 3 : 77b9b82
commit 4 : &amp;lt;any_hash&amp;gt;
&lt;/code>&lt;/pre>
&lt;p>&lt;strong>Note:&lt;/strong> You need to have admin rights over the repo since you are using &lt;code>--hard&lt;/code> and &lt;code>-f&lt;/code>.&lt;/p>
&lt;ol>
&lt;li>&lt;code>git checkout b3d92c5&lt;/code> Checkout the last usable commit.&lt;/li>
&lt;li>&lt;code>git checkout -b repair&lt;/code> Create a new branch to work on.&lt;/li>
&lt;li>&lt;code>git cherry-pick 77b9b82&lt;/code> Run through commit 3.&lt;/li>
&lt;li>&lt;code>git cherry-pick 2c6a45b&lt;/code> Run through commit 1.&lt;/li>
&lt;li>&lt;code>git checkout master&lt;/code> Checkout master.&lt;/li>
&lt;li>&lt;code>git reset --hard b3d92c5&lt;/code> Reset master to last usable commit.&lt;/li>
&lt;li>&lt;code>git merge repair&lt;/code> Merge our new branch onto master.&lt;/li>
&lt;li>&lt;code>git push -f origin master&lt;/code> Push master to the remote repo.&lt;/li>
&lt;/ol>
&lt;p>If didn&amp;rsquo;t publish changes, to remove the latest commit, do:&lt;/p>
&lt;pre>&lt;code>git rebase -i HEAD~&amp;lt;number of commits to go back&amp;gt;
git rebase -i &amp;lt;CommitId&amp;gt;~1
git reset --hard HEAD^
git reset --hard commitId
git rebase -i HEAD~5
&lt;/code>&lt;/pre>
&lt;p>If already published to-be-deleted commit:&lt;/p>
&lt;p>&lt;code>git revert HEAD&lt;/code>&lt;/p>
&lt;h3 id="cleanups">Cleanups&lt;/h3>
&lt;pre>&lt;code>git stash clear
git reflog expire --expire-unreachable=now --all
git fsck --full
git fsck --unreachable # Will show you the list of what will be deleted
git gc --prune=now # Cleanup unnecessary files and optimize the local repository
&lt;/code>&lt;/pre>
&lt;h2 id="common-git-commands">Common git commands&lt;/h2>
&lt;pre>&lt;code>git rev-list --all --count # count commits
git clean -fd # To remove all untracked (non-git) files and folders!
&lt;/code>&lt;/pre>
&lt;h2 id="resources">Resources&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://www.conventionalcommits.org/en/v1.0.0/#summary">Git commits style&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://sethrobertson.github.io/GitFixUm/fixup.html">On undoing, fixing, or removing commits in git&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://passingcuriosity.com/2017/truncating-git-history/">Truncating git history&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.npmjs.com/package/clear-git-branch?activeTab=explore">clean unused branches&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Code style notes</title><link>https://romankurnovskii.com/en/posts/code-style/</link><pubDate>Wed, 21 Dec 2022 00:00:00 +0000</pubDate><guid>https://romankurnovskii.com/en/posts/code-style/</guid><description>&lt;h2 id="release-notes-example">Release notes example&lt;/h2>
&lt;p>&lt;strong>Changed&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>feat(exports): export mergeConfig #5151&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Fixed&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>fix(CancelledError): include config #4922&lt;/li>
&lt;li>fix(general): removing multiple/trailing/leading whitespace #5022&lt;/li>
&lt;li>fix(headers): decompression for responses without Content-Length header #5306&lt;/li>
&lt;li>fix(webWorker): exception to sending form data in web worker #5139&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Refactors&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>refactor(types): AxiosProgressEvent.event type to any #5308&lt;/li>
&lt;li>refactor(types): add missing types for static AxiosError.from method #4956&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Chores&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>chore(docs): remove README link to non-existent upgrade guide #5307&lt;/li>
&lt;li>chore(docs): typo in issue template name #5159&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Common used&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;code>build&lt;/code>: Changes that affect the build system or external dependencies (e.g., updates to package.json, pom.xml, build.gradle, Dockerfile, etc.)&lt;/li>
&lt;li>&lt;code>chore&lt;/code>: Regular maintenance tasks and changes that don&amp;rsquo;t modify the source code or the test suite (e.g., updating build tasks, package manager config, etc.)&lt;/li>
&lt;li>&lt;code>ci&lt;/code>: Changes to Continuous Integration configuration files and scripts (e.g., changes in Jenkinsfile, Travis CI configuration, CircleCI, etc.)&lt;/li>
&lt;li>&lt;code>docs&lt;/code>: Changes only affecting documentation (e.g., changes in README, API docs, comment blocks, etc.)&lt;/li>
&lt;li>&lt;code>feat&lt;/code>: Introducing a new feature to your application.&lt;/li>
&lt;li>&lt;code>fix&lt;/code>: A bug fix in your application code.&lt;/li>
&lt;li>&lt;code>perf&lt;/code>: Performance improvements to your code (e.g., optimizing algorithms, improving efficiency, etc.)&lt;/li>
&lt;li>&lt;code>refactor&lt;/code>: Changes in the code that neither fix a bug nor add a feature; typically, these changes improve code readability or structure.&lt;/li>
&lt;li>&lt;code>revert&lt;/code>: If you are reverting a previous commit.&lt;/li>
&lt;li>&lt;code>style&lt;/code>: Changes to the coding style (e.g., changes in whitespace, formatting, missing semi-colons, etc.) that do not affect the meaning of the code.&lt;/li>
&lt;li>&lt;code>test&lt;/code>: Adding or updating tests, covering new or existing functionality.&lt;/li>
&lt;/ul>
&lt;h2 id="code-format">Code format&lt;/h2>
&lt;ul>
&lt;li>Detailed description in &lt;a href="https://www.conventionalcommits.org/en/v1.0.0/#summary">git commits style&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://google.github.io/styleguide/pyguide.html">Python style&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://google.github.io/styleguide/jsguide.html">JavaScript style&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>