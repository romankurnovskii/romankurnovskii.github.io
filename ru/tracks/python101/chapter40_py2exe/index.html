<!doctype html><html lang=ru dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo "><title>40. py2exe | Roman Kurnovskii</title><meta property="og:title" content="40. py2exe | Roman Kurnovskii"><meta property="og:type" content="article"><meta property="og:image" content="https://romankurnovskii.com/images/icon.png"><meta property="og:url" content="https://romankurnovskii.com/ru/tracks/python101/chapter40_py2exe/"><meta property="og:description" content="Python 101"><meta property="og:locale" content="ru"><meta property="og:site_name" content="Roman Kurnovskii"><meta property="article:published_time" content="2022-06-28T00:00:00+00:00"><meta property="article:modified_time" content="2023-02-11T09:25:30+02:00"><meta property="article:section" content="tracks"><link rel=icon type=image/png sizes=32x32 href=https://romankurnovskii.com/images/icon_huc02d7296c9eb9353758cb2467c0d17b0_10773_32x32_fill_box_center_3.png><link rel=apple-touch-icon sizes=180x180 href=https://romankurnovskii.com/images/icon_huc02d7296c9eb9353758cb2467c0d17b0_10773_180x180_fill_box_center_3.png><link href=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css rel=stylesheet crossorigin=anonymous><script src=https://unpkg.com/flowbite@1.5.1/dist/flowbite.js></script>
<script src=https://unpkg.com/axios@0.27.2/dist/axios.min.js></script>
<script src=https://unpkg.com/lunr@2.3.9/lunr.min.js></script>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" media=print onload='this.media="all",this.onload=null' crossorigin><script src=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/js/all.min.js integrity=" sha512-8pHNiqTlsrRjVD4A/3va++W1sMbUHwWxxRPWNyVlql3T+Hgfd81Qc6FC5WMXDC+tSauxxzp1tgiAvSKFu1qIlA==" defer crossorigin></script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600&display=swap" rel=stylesheet><link rel=stylesheet href=https://romankurnovskii.com/css/yalla.min.c7ec176e8ca18ce892f0d7dd4156de03306c698a683533675776a9c909994c30f4fbe02baed2f6c54ef51f6b8277e88c.css><script defer src=https://romankurnovskii.com/js/yalla.min.c10f88fac8e0f4c2c802131741be30a1f629861cc319c52238e2685191e08f721da37a6696906f314554e1ec7423f51c.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css media=print onload='this.media="all",this.onload=null' crossorigin><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js crossorigin></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js crossorigin></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script><script defer src=https://cdn.jsdelivr.net/npm/mermaid@9.1.3/dist/mermaid.min.js crossorigin></script><meta name=description content="Python 101"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Roadmaps","item":"https://romankurnovskii.com/ru/tracks/"},{"@type":"ListItem","position":2,"name":"Карманная книга по Python","item":"https://romankurnovskii.com/ru/tracks/python101/"},{"@type":"ListItem","position":3,"name":"40. py2exe","item":"https://romankurnovskii.com/ru/tracks/python101/chapter40_py2exe/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://romankurnovskii.com/ru/tracks/python101/chapter40_py2exe/"},"headline":"40. py2exe | Roman Kurnovskii","datePublished":"2022-06-28T00:00:00+00:00","dateModified":"2023-02-11T09:25:30+02:00","wordCount":1300,"publisher":{"@type":"Person","name":"Roman Kurnovskii","logo":{"@type":"ImageObject","url":"https://romankurnovskii.com/images/icon.png"}},"description":"Python 101"}</script><link rel=preconnect href=https://www.google-analytics.com crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-26F2C5ZR4Y"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-26F2C5ZR4Y")</script><script type=text/javascript>(function(e,t,n,s,o,i,a){e[o]=e[o]||function(){(e[o].a=e[o].a||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://mc.yandex.ru/metrika/tag.js?v2","ym"),ym(87734724,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0})</script><noscript><div><img src=https://mc.yandex.ru/watch/87734724 style=position:absolute;left:-9999px alt></div></noscript><script>let storageColorScheme=localStorage.getItem("lightDarkMode");const isDark2=JSON.parse(localStorage.getItem("DarkMode")||"false");isDark2?storageColorScheme="Dark":storageColorScheme="Light",((storageColorScheme=="Auto"||storageColorScheme==null)&&window.matchMedia("(prefers-color-scheme: dark)").matches||storageColorScheme=="Dark")&&document.getElementsByTagName("html")[0].classList.add("dark")</script></head><body class="flex min-h-screen flex-col"><header><div class="mx-auto w-full max-w-screen-xl"><nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0"><button id=navbar-btn class="md:hidden flex items-center px-3 py-2" aria-label="open mobile menu">
<i class="fas fa-bars"></i></button>
<a href=/ru class="me-6 text-primary-text text-xl font-bold">Roman Kurnovskii</a><div id=mobile-burger-menu class="hidden block md:flex md:grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20"><ul id=menu><li class=parent><a href=/ru/posts/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">Заметки</a><ul class=child><li class=parent><a href=/ru/categories/roadmaps/>Руководства <span class=expand>»</span></a><ul class=child><li class=parent><a href=/ru/tracks/python101/>Справочник Python</a></li><li class=parent><a href=/ru/tracks/webrtc/>Справочник WebRTC</a></li><li class=parent><a href=/ru/tracks/disser/>Диссертация</a></li></ul></li><li class=parent><a href=/ru/categories/programming/>Программирование <span class=expand>»</span></a><ul class=child><li class=parent><a href=/en/tracks/algorithms-101/>Algorithms [EN]</a></li><li class=parent><a href=/ru/categories/hugo/>Hugo</a></li><li class=parent><a href=/ru/categories/javascript/>JavaScript</a></li><li class=parent><a href=/ru/categories/python/>Python</a></li></ul></li><li><a href=/en/p/links/>Links</a></li></ul></li><li class=parent><a href=/ru/apps/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">Приложения</a></li><li class=parent><a href=/ru/p/publications class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">Публикации</a></li></ul></div><div class=flex><div class="relative pt-4 md:pt-0"><form id=search class="flex items-center"><label for=search-input class=sr-only>Search</label><div class="relative w-full"><input type=text type=search id=search-input class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder=Search required></div></form></div><div class="relative pt-4 ps-2 md:pt-0"><button class="p-1 rounded border dark:border-slate-700 hover:bg-slate-200 dark:hover:bg-slate-700" onclick='location.href="/ru/search/"'>
<img width=13 src=https://img.icons8.com/ios-glyphs/30/null/search-more.png></button></div></div></nav></div><div id=is-open-mobile class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0"></div><script>document.addEventListener("DOMContentLoaded",()=>{switchMobileMenuBurger()})</script></header><main class="grow pt-16"><div class=pl-scrollbar><div class="mx-auto w-full max-w-screen-2xl lg:px-2 xl:px-4"><div class=lg:pt-8><div class="flex flex-col md:flex-row bg-secondary-bg rounded"><div class="md:w-1/4 lg:w-1/5 border-e"><div class="sticky mt-12"><div id=sidebar-title class="md:hidden mx-4 px-2 pt-4 pb-2 md:border-b text-tertiary-text md:text-primary-text"><span class=font-semibold>Содержание</span>
<i class='fas fa-caret-right ms-1'></i></div><div id=sidebar-toc class="hidden md:block mx-6 md:mx-0 pe-2 pt-2 md:max-h-doc-sidebar bg-primary-bg md:bg-transparent"><div class="flex flex-wrap ms-1 -me-2 p-1 bg-secondary-bg md:bg-primary-bg rounded"><a class=hover:text-yalla href=https://romankurnovskii.com/ru/tracks/python101/>Карманная книга по Python</a></div><aside aria-label=Sidebar><div class="py-2 px-1"><ul id=doc__nav__sidebar class=space-y-1><li><a href=https://romankurnovskii.com/ru/tracks/python101/01-intro/><span>Введение</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/01-part_i/><span>Часть I - Основы</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter1_idle/><span>1. Среда разработки</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter2_strings/><span>2. Строки</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter3_lists_dicts/><span>3. Списки, кортежи и словари</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter4_conditionals/><span>4. Условия</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter5_loops/><span>5. Циклы</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter6_comprehensions/><span>6. Генераторы</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter7_exception_handling/><span>7. Обработка исключений</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter8_file_io/><span>8. Работа с файлами</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter9_imports/><span>9. Импорт модулей</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter10_functions/><span>10. Функции</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter11_classes/><span>11. Классы</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter12_introspection/><span>12. Интроспекция</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/02-part_ii/><span>Часть II - Стандартные модули</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter13_csv/><span>13. Модуль csv</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter14_config_parser/><span>14. Модуль configparser</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter15_logging/><span>15. Логирование</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter20_sys/><span>20. Модуль sys</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter16_os/><span>16. Модуль os</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter17_smtplib/><span>17. Модуль email / smtplib</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter18_sqlite/><span>18. Модуль sqlite</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter19_subprocess/><span>19. Модуль subprocess</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter21_thread/><span>21. Модуль потоков Thread</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter21-1_asyncio/><span>21-1. Модуль asyncio</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter22_time/><span>22. Работа с датами и временем</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter23_xml/><span>23. Модуль xml</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter24_debugging/><span>24. Отладчик Python</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/03-part_iii/><span>Часть III - Промежуточные вопросы и ответы</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter25_decorators/><span>25. Декораторы</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter26_lambda/><span>26. Лямбда</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter27_profiling/><span>27. Профилирование кода</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter28_testing/><span>28. Введение в тестирование</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter29_pip/><span>29. Установка пакетов</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/04-part_iv/><span>Часть IV - Советы, приемы и учебные пособия</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter30_configobj/><span>30. ConfigObj</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter31_lxml/><span>31. Парсинг XML с помощью lxml</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter32_pylint/><span>32. Анализ кода Python</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter33_requests/><span>33. Пакет requests</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter34_sqlalchemy/><span>34. Пакет SQLAlchemy</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter35_virtualenv/><span>35. virtualenv</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter36_creating_modules_and_packages/><span>36. Создание модулей и пакетов</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/05-part_v/><span>Часть V - Упаковка и распространение</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter37_pypi_packaging/><span>37. Как добавить пакет в PyPI</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter38_eggs/><span>38. Python egg</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter39_wheels/><span>39. Python wheels</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter40_py2exe/ class=bg-tertiary-bg><span>40. py2exe</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter41_bb_freeze/><span>41. bbfreeze</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter42_cx_freeze/><span>42. cx_Freeze</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter43_pyinstaller/><span>43. PyInstaller</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter44_creating_an_installer/><span>44. Создание программы установки</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/chapter45_hosting/><span>45. Хостинг Python приложения</span></a></li><li><a href=https://romankurnovskii.com/ru/tracks/python101/100-plus-voprosov-python/><span>Топ 100 вопросов по Python</span></a></li></ul></div></aside></div></div></div><div class="w-full md:w-3/4 lg:w-4/5 pb-2 pt-2 md:pt-2"><div class=flex><div class="w-full lg:w-3/4 px-6"><article class=prose><h1>40. py2exe</h1><div class="text-tertiary-text text-sm not-prose mt-2 flex flex-row flex-wrap items-center"><div class=me-4><i class="fa-regular fa-calendar-days"></i>
<span>Обновлено: 2023-02-11</span></div><div class=me-4><i class="fa-regular fa-clock"></i>
<span>7 мин</span></div><div id=page__views__div class="me-4 my-2"><i class="fa-regular fa-eye me-1"></i>
<span id=page__views></span></div></div><div class="block lg:hidden"><h3 class=text-lg>Содержание</h3><div class=break-words><nav id=TableOfContents><ul><li><a href=#создание-простого-графического-интерфейса>Создание простого графического интерфейса</a></li><li><a href=#файл-py2exe-setuppy>Файл py2exe setup.py</a></li><li><a href=#создание-расширенного-файла-setuppy>Создание расширенного файла setup.py</a></li></ul></nav></div></div><p>Проект <code>py2exe</code> раньше был основным способом создания исполняемых файлов Windows из ваших приложений Python. На <a href=https://pypi.python.org/pypi/py2exe/>PyPI</a> лежит версия, которая будет работать и с Python 2 и 3.</p><p>У вас есть несколько вариантов для приложения. Вы можете создать программу, которая будет работать только в терминале, вы можете создать графический интерфейс пользователя (GUI) для рабочего стола или создать веб-приложение. Мы создадим очень простой настольный интерфейс, который ничего не делает, кроме отображения формы, которую пользователь может заполнить. Мы будем использовать инструментарий wxPython GUI, чтобы продемонстрировать, как py2exe может подбирать пакеты без нашего указания.</p><h2 id=создание-простого-графического-интерфейса>Создание простого графического интерфейса</h2><p>Вам нужно перейти на сайт wxPython (<a href=https://www.wxpython.org>www.wxpython.org</a>) и загрузить копию, соответствующую вашей версии Python. Если у вас 32-битный Python, убедитесь, что вы скачали 32-битный wxPython. Вы не сможете использовать easy_install или pip для установки wxPython, если только вы не получите самую современную версию wxPython от Phoenix, поэтому вам придется взять копию, предварительно собранную для вашей системы, либо с сайта wxPython, либо из менеджера пакетов вашей системы. Я рекомендую использовать по крайней мере wxPython 2.9 или выше.</p><p>Давайте напишем немного кода!</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-1> 1</a></span><span><span style=color:#00a>import</span> <span style=color:#0aa;text-decoration:underline>wx</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-2> 2</a></span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-3> 3</a></span><span><span style=color:#00a>class</span> <span style=color:#0a0;text-decoration:underline>DemoPanel</span>(wx.Panel):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-4> 4</a></span><span>    <span style=color:#a50>&#34;&#34;&#34;&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-5> 5</a></span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-6> 6</a></span><span>    <span style=color:#00a>def</span> __init__(self, parent):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-7> 7</a></span><span>        <span style=color:#a50>&#34;&#34;&#34;Constructor&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-8> 8</a></span><span>        wx.Panel.__init__(self, parent)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-9> 9</a></span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-10>10</a></span><span>        labels = [<span style=color:#a50>&#34;Name&#34;</span>, <span style=color:#a50>&#34;Address&#34;</span>, <span style=color:#a50>&#34;City&#34;</span>, <span style=color:#a50>&#34;State&#34;</span>, <span style=color:#a50>&#34;Zip&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-11>11</a></span><span>                  <span style=color:#a50>&#34;Phone&#34;</span>, <span style=color:#a50>&#34;Email&#34;</span>, <span style=color:#a50>&#34;Notes&#34;</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-12>12</a></span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-13>13</a></span><span>        mainSizer = wx.BoxSizer(wx.VERTICAL)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-14>14</a></span><span>        lbl = wx.StaticText(self, label=<span style=color:#a50>&#34;Please enter your information here:&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-15>15</a></span><span>        lbl.SetFont(wx.Font(<span style=color:#099>12</span>, wx.SWISS, wx.NORMAL, wx.BOLD))
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-16>16</a></span><span>        mainSizer.Add(lbl, <span style=color:#099>0</span>, wx.ALL, <span style=color:#099>5</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-17>17</a></span><span>        <span style=color:#00a>for</span> lbl <span style=color:#00a>in</span> labels:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-18>18</a></span><span>            sizer = self.buildControls(lbl)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-19>19</a></span><span>            mainSizer.Add(sizer, <span style=color:#099>1</span>, wx.EXPAND)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-20>20</a></span><span>        self.SetSizer(mainSizer)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-21>21</a></span><span>        mainSizer.Layout()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-22>22</a></span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-23>23</a></span><span>    <span style=color:#00a>def</span> <span style=color:#0a0>buildControls</span>(self, label):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-24>24</a></span><span>        <span style=color:#a50>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-25>25</a></span><span><span style=color:#a50>        Put the widgets together
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-26>26</a></span><span><span style=color:#a50>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-27>27</a></span><span>        sizer = wx.BoxSizer(wx.HORIZONTAL)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-28>28</a></span><span>        size = (<span style=color:#099>80</span>,<span style=color:#099>40</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-29>29</a></span><span>        font = wx.Font(<span style=color:#099>12</span>, wx.SWISS, wx.NORMAL, wx.BOLD)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-30>30</a></span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-31>31</a></span><span>        lbl = wx.StaticText(self, label=label, size=size)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-32>32</a></span><span>        lbl.SetFont(font)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-33>33</a></span><span>        sizer.Add(lbl, <span style=color:#099>0</span>, wx.ALL|wx.CENTER, <span style=color:#099>5</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-34>34</a></span><span>        <span style=color:#00a>if</span> label != <span style=color:#a50>&#34;Notes&#34;</span>:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-35>35</a></span><span>            txt = wx.TextCtrl(self, name=label)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-36>36</a></span><span>        <span style=color:#00a>else</span>:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-37><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-37>37</a></span><span>            txt = wx.TextCtrl(self, style=wx.TE_MULTILINE, name=label)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-38><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-38>38</a></span><span>        sizer.Add(txt, <span style=color:#099>1</span>, wx.ALL, <span style=color:#099>5</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-39><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-39>39</a></span><span>        <span style=color:#00a>return</span> sizer
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-40><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-40>40</a></span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-41><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-41>41</a></span><span><span style=color:#00a>class</span> <span style=color:#0a0;text-decoration:underline>DemoFrame</span>(wx.Frame):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-42><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-42>42</a></span><span>    <span style=color:#a50>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-43><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-43>43</a></span><span><span style=color:#a50>    Frame that holds all other widgets
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-44><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-44>44</a></span><span><span style=color:#a50>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-45><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-45>45</a></span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-46><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-46>46</a></span><span>    <span style=color:#00a>def</span> __init__(self):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-47><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-47>47</a></span><span>        <span style=color:#a50>&#34;&#34;&#34;Constructor&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-48><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-48>48</a></span><span>        wx.Frame.__init__(self, <span style=color:#00a>None</span>, wx.ID_ANY,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-49><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-49>49</a></span><span>                          <span style=color:#a50>&#34;Py2Exe Tutorial&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-50><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-50>50</a></span><span>                          size=(<span style=color:#099>600</span>,<span style=color:#099>400</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-51><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-51>51</a></span><span>                          )
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-52><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-52>52</a></span><span>        panel = DemoPanel(self)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-53><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-53>53</a></span><span>        self.Show()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-54><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-54>54</a></span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-55><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-55>55</a></span><span><span style=color:#00a>if</span> __name__ == <span style=color:#a50>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-56><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-56>56</a></span><span>    app = wx.App(<span style=color:#00a>False</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-57><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-57>57</a></span><span>    frame = DemoFrame()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-58><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-58>58</a></span><span>    app.MainLoop()
</span></span></code></pre></div><p>Если вы выполните приведенный выше код, вы должны увидеть что-то вроде следующего:</p><p><p class=md__image><img src=../img/py2exe_wx.ru.jpg id=zoom-default alt loading=lazy></p></p><p>Давайте немного разложим это по полочкам. Мы создаем два класса, <strong>DemoPanel</strong> и <strong>DemoFrame</strong>. В <strong>wxPython</strong> объект wx.Frame используется для создания реального &ldquo;окна&rdquo;, которое вы видите в большинстве случаев. Вы добавляете <strong>wx.Panel</strong>, чтобы придать вашему приложению соответствующий вид и ощущение, а также добавить табуляцию между полями. Родителем объекта панели является фрейм. Фрейм, будучи виджетом верхнего уровня, не имеет родителя. Панель содержит все остальные виджеты в этом примере. Для компоновки виджетов мы используем сайзеры. Сайзеры позволяют разработчику создавать виджеты, размер которых будет изменяться соответствующим образом при изменении размера самого окна. Вы также можете разместить виджеты на панели с помощью абсолютного позиционирования, что не рекомендуется. В конце мы вызываем метод <strong>MainLoop</strong> объекта <strong>wx.App</strong>, чтобы запустить цикл событий, который позволяет wxPython реагировать на события мыши и клавиатуры (такие как щелчок, ввод текста и т.д.).</p><p>Теперь мы готовы узнать, как упаковать это приложение в исполняемый файл!</p><h2 id=файл-py2exe-setuppy>Файл py2exe setup.py</h2><p>Ключевым элементом любого скрипта py2exe является файл <strong>setup.py</strong>. Этот файл определяет, что будет включено или исключено, как сильно мы будем сжимать и упаковывать, и многое другое! Вот простейшая установка, которую мы можем использовать с приведенным выше скриптом wx:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-1>1</a></span><span><span style=color:#00a>from</span> <span style=color:#0aa;text-decoration:underline>distutils.core</span> <span style=color:#00a>import</span> setup
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-2>2</a></span><span><span style=color:#00a>import</span> <span style=color:#0aa;text-decoration:underline>py2exe</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-3>3</a></span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-4>4</a></span><span>setup(windows=[<span style=color:#a50>&#39;sampleApp.py&#39;</span>])
</span></span></code></pre></div><p>Как вы видите, мы импортируем метод <strong>setup</strong> из <strong>distutils.core</strong>, а затем импортируем <strong>py2exe</strong>. Далее мы вызываем setup с параметром ключевого слова <strong>windows</strong> и передаем ему имя главного файла внутри объекта python list. Если бы вы создавали проект без графического интерфейса, то вместо <strong>windows</strong> вы бы использовали клавишу <strong>console</strong>. Чтобы запустить этот фрагмент, сохраните его в той же папке, что и ваш скрипт wxPython, откройте командную строку и перейдите в то место, где вы сохранили эти два файла. Затем введите <strong>python setup.py py2exe</strong>, чтобы запустить его. Если все идет хорошо, вы увидите много вывода, заканчивающегося примерно так:</p><p><p class=md__image><img src=../img/py2exe_output.ru.jpg id=zoom-default alt loading=lazy></p></p><p>Если вы используете Python 2.6, вы можете получить ошибку <strong>MSVCP90.dll</strong> не найден. Если вы увидите эту ошибку, вам, вероятно, придется найти <strong>Microsoft Visual C++ 2008 Redistributable Package</strong> и установить его, чтобы DLL стала доступна в вашей системе. Иногда бывает так, что вы создаете исполняемый файл, а затем, когда вы его запускаете, он просто не загружается правильно. Обычно при этом создается файл журнала, который можно использовать для выяснения причины. Я также нашел инструмент под названием <strong>Dependency Walker</strong>, который можно запустить против вашего исполняемого файла, и он может рассказать вам о недостающих элементах, не относящихся к Python (например, DLL и т.д.).</p><p>Я хотел бы отметить, что файл <strong>setup.py</strong> не включает wxPython в явном виде. Это означает, что py2exe был достаточно умен, чтобы включить пакет wxPython автоматически. Давайте потратим немного времени, чтобы узнать немного больше о включении и исключении пакетов.</p><h2 id=создание-расширенного-файла-setuppy>Создание расширенного файла setup.py</h2><p>Давайте посмотрим, какие еще возможности дает нам py2exe для создания двоичных файлов, создав более сложный файл <strong>setup.py</strong>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-1> 1</a></span><span><span style=color:#00a>from</span> <span style=color:#0aa;text-decoration:underline>distutils.core</span> <span style=color:#00a>import</span> setup
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-2> 2</a></span><span><span style=color:#00a>import</span> <span style=color:#0aa;text-decoration:underline>py2exe</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-3> 3</a></span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-4> 4</a></span><span>includes = []
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-5> 5</a></span><span>excludes = [<span style=color:#a50>&#39;_gtkagg&#39;</span>, <span style=color:#a50>&#39;_tkagg&#39;</span>, <span style=color:#a50>&#39;bsddb&#39;</span>, <span style=color:#a50>&#39;curses&#39;</span>, <span style=color:#a50>&#39;email&#39;</span>, <span style=color:#a50>&#39;pywin.debugger&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-6> 6</a></span><span>            <span style=color:#a50>&#39;pywin.debugger.dbgcon&#39;</span>, <span style=color:#a50>&#39;pywin.dialogs&#39;</span>, <span style=color:#a50>&#39;tcl&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-7> 7</a></span><span>            <span style=color:#a50>&#39;Tkconstants&#39;</span>, <span style=color:#a50>&#39;Tkinter&#39;</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-8> 8</a></span><span>packages = []
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-9> 9</a></span><span>dll_excludes = [<span style=color:#a50>&#39;libgdk-win32-2.0-0.dll&#39;</span>, <span style=color:#a50>&#39;libgobject-2.0-0.dll&#39;</span>, <span style=color:#a50>&#39;tcl84.dll&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-10>10</a></span><span>                <span style=color:#a50>&#39;tk84.dll&#39;</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-11>11</a></span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-12>12</a></span><span>setup(
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-13>13</a></span><span>    options = {<span style=color:#a50>&#34;py2exe&#34;</span>: {<span style=color:#a50>&#34;compressed&#34;</span>: <span style=color:#099>2</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-14>14</a></span><span>                          <span style=color:#a50>&#34;optimize&#34;</span>: <span style=color:#099>2</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-15>15</a></span><span>                          <span style=color:#a50>&#34;includes&#34;</span>: includes,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-16>16</a></span><span>                          <span style=color:#a50>&#34;excludes&#34;</span>: excludes,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-17>17</a></span><span>                          <span style=color:#a50>&#34;packages&#34;</span>: packages,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-18>18</a></span><span>                          <span style=color:#a50>&#34;dll_excludes&#34;</span>: dll_excludes,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-19>19</a></span><span>                          <span style=color:#a50>&#34;bundle_files&#34;</span>: <span style=color:#099>3</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-20>20</a></span><span>                          <span style=color:#a50>&#34;dist_dir&#34;</span>: <span style=color:#a50>&#34;dist&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-21>21</a></span><span>                          <span style=color:#a50>&#34;xref&#34;</span>: <span style=color:#00a>False</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-22>22</a></span><span>                          <span style=color:#a50>&#34;skip_archive&#34;</span>: <span style=color:#00a>False</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-23>23</a></span><span>                          <span style=color:#a50>&#34;ascii&#34;</span>: <span style=color:#00a>False</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-24>24</a></span><span>                          <span style=color:#a50>&#34;custom_boot_script&#34;</span>: <span style=color:#a50>&#39;&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-25>25</a></span><span>                         }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-26>26</a></span><span>              },
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-27>27</a></span><span>    windows=[<span style=color:#a50>&#39;sampleApp.py&#39;</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-28>28</a></span><span>    )
</span></span></code></pre></div><p>Это довольно понятно, но все же давайте разберемся. Сначала мы создадим несколько списков, которые мы передадим в параметр options функции setup.</p><ul><li>Список <strong>includes</strong> предназначен для специальных модулей, которые вам нужно включить. Иногда py2exe не может найти определенные модули, поэтому их нужно указать вручную.</li><li>Список <strong>excludes</strong> - это список модулей, которые нужно исключить из вашей программы. В данном случае нам не нужен <code>Tkinter</code>, так как мы используем wxPython. Этот список исключений GUI2Exe будет исключать по умолчанию.</li><li>Список <strong>packages</strong> - это список конкретных пакетов для включения. Опять же, иногда py2exe просто не может что-то найти. Мне уже приходилось включать сюда email, PyCrypto или lxml. Обратите внимание, что если список excludes содержит что-то, что вы пытаетесь включить в списки packages или includes, py2exe может продолжать исключать это.</li><li><strong>dll_excludes</strong> - исключает dll, которые не нужны в нашем проекте.</li></ul><p>В словаре <strong>options</strong> у нас есть еще несколько опций, на которые стоит обратить внимание. Ключ <strong>compressed</strong> указывает py2exe, сжимать или нет zip-файл, если он установлен. Ключ optimize задает уровень оптимизации. Ноль - это отсутствие оптимизации, а 2 - самый высокий уровень. Установив <strong>optimize</strong> на 2, мы можем уменьшить размер папки примерно на один мегабайт. Ключ <strong>bundle_files</strong> связывает dlls в zip-файл или exe. Допустимыми значениями для bundle_files являются:</p><ul><li>1 = упаковывать все, включая интерпретатор Python.</li><li>2 = упаковывать все, кроме интерпретатора Python.</li><li>3 = не упаковывать (по умолчанию).</li></ul><p>Несколько лет назад, когда я только начинал изучать py2exe, я спросил в их списке рассылки, какой вариант лучше, потому что у меня были проблемы с вариантом bundle 1. Мне ответили, что вариант 3, вероятно, самый стабильный. Я перешел на него и перестал испытывать случайные проблемы, поэтому сейчас я рекомендую именно его. Если вам не нравится распространять более одного файла, заархивируйте их или создайте программу установки. Единственный вариант, который я использую в этом списке, это <strong>dist_dir</strong>. Я использую его для экспериментов с различными вариантами сборки или для создания пользовательских сборок, когда я не хочу перезаписывать свою основную хорошую сборку. Обо всех остальных опциях вы можете прочитать на сайте <code>py2exe</code>.</p><p>Пакет <code>py2exe</code> не поддерживает включение <code>eggs</code> Python в свои двоичные файлы, поэтому если вы установили пакет, от которого зависит ваше приложение, как <code>egg</code>, то при создании исполняемого файла он не будет работать. Вам придется убедиться, что ваши зависимости установлены нормально.</p><p>Существует несколько альтернатив <code>py2exe</code>, таких как <strong>bbfreeze, cx_freeze</strong> и <strong>PyInstaller</strong>. Создание исполняемых файлов может быть нелегким делом, но наберитесь терпения и настойчиво пройдите через это.</p></article><div class="-mx-2 mt-4 flex flex-col border-t border-b pb-1 px-2 pt-4 md:flex-row md:justify-between"><div><span class="text-primary-text block font-bold">Ранее</span>
<a href=https://romankurnovskii.com/ru/tracks/python101/chapter39_wheels/ class=block>39. Python wheels</a></div><div class="mt-4 md:mt-0 md:text-right"><span class="text-primary-text block font-bold">Далее</span>
<a href=https://romankurnovskii.com/ru/tracks/python101/chapter41_bb_freeze/ class=block>41. bbfreeze</a></div></div><div id=open_comments_block></div><script src=/opencomments.js renderdivid=open_comments_block server=https://eyt4njm3se.execute-api.eu-west-1.amazonaws.com/comments awstag defer></script></div><div class="hidden lg:block lg:w-1/4"><div class="bg-primary-bg prose sticky top-7 z-10 hidden
px-6 lg:block"><h3 class=text-lg>Содержание</h3></div><div class="sticky-toc hidden px-0 pb-6 lg:block"><nav id=TableOfContents><ul><li><a href=#создание-простого-графического-интерфейса>Создание простого графического интерфейса</a></li><li><a href=#файл-py2exe-setuppy>Файл py2exe setup.py</a></li><li><a href=#создание-расширенного-файла-setuppy>Создание расширенного файла setup.py</a></li></ul></nav><div class="feedback-links mt-4 text-sm"><hr><div><a href=https://github.com/romankurnovskii/romankurnovskii.github.io/edit/main/content/tracks/python101/chapter40_py2exe.ru.md title="Edit this page" target=_blank><i class="fas fa-edit me-1"></i>
<span>Редактировать страницу</span></a></div><div><a href="https://github.com/romankurnovskii/romankurnovskii.github.io/issues/new/?body=File:%20[/content/tracks/python101/chapter40_py2exe.ru.md/]%28/https:/romankurnovskii.com/ru/tracks/python101/chapter40_py2exe/%29" title="Request issue" target=_blank><i class="fas fa-check me-1" aria-hidden=true></i>
<span>Запросить изменения</span></a></div></div></div><script>window.addEventListener("DOMContentLoaded",()=>{enableStickyToc()})</script></div></div></div></div></div><script>document.addEventListener("DOMContentLoaded",()=>{changeSidebarHeight(),switchDocToc()})</script></div></div></main><footer class=pl-scrollbar><div class="mx-auto w-full max-w-screen-xl"><div class="text-center p-6 pin-b"><p class="text-sm text-tertiary-text">&copy; 2023 <a href=https://romankurnovskii.com>Roman Kurnovskii</a> personal page
&#183;
<a href=https://romankurnovskii.com/ru/index.xml target=_blank>RSS</a>
&#183;
<a href=https://gohugo.io>Hugo</a> 40d4080 2023-02-11</p></p></div><script src=/js/lunr.stemmer.support.min.js></script>
<script src=/js/lunr.ru.min.js></script>
<script src=/js/lunr.multi.min.js></script>
<script src=/js/search.js?v1 languagemode=ru></script><div id=search-result tabindex=-1 class="overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 max-w-xs" hidden><div class="relative p-4 w-full max-w-xs h-full md:h-auto"><div class="relative bg-white rounded-lg shadow dark:bg-gray-700"><div class=p-6><h3>Search results</h3><div id=popup_search_results class=prose></div></div></div></div></div><script src=/js/search-page.js?v3></script>
<script src=/js/base.js?5 languagemode=ru></script></div></footer><script src=https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js defer></script>
<script src=/js/zoom-image/placeholders.js?4 defer></script>
<script src=/js/zoom-image/index.js?4 defer></script></body></html>