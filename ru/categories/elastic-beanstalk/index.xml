<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Elastic Beanstalk on Roman Kurnovskii</title><link>https://romankurnovskii.com/ru/categories/elastic-beanstalk/</link><description>Recent content in Elastic Beanstalk on Roman Kurnovskii</description><generator>Hugo -- gohugo.io</generator><language>ru</language><copyright>&amp;copy; 2025</copyright><lastBuildDate>Sat, 10 Sep 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://romankurnovskii.com/ru/categories/elastic-beanstalk/index.xml" rel="self" type="application/rss+xml"/><item><title>Elastic Beanstalk</title><link>https://romankurnovskii.com/ru/tracks/aws-certified-developer-associate/elasticbeanstalk/</link><pubDate>Sat, 10 Sep 2022 00:00:00 +0000</pubDate><guid>https://romankurnovskii.com/ru/tracks/aws-certified-developer-associate/elasticbeanstalk/</guid><description>&lt;h1 id="aws-elastic-beanstalk">AWS Elastic Beanstalk&lt;/h1>
&lt;ul>
&lt;li>&lt;a href="https://aws.amazon.com/elasticbeanstalk/">Документация AWS Elastic Beanstalk&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://docs.aws.amazon.com/elasticbeanstalk/?id=docs_gateway">Документация AWS Elastic Beanstalk&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="цены">Цены&lt;/h2>
&lt;p>Дополнительная плата за AWS Elastic Beanstalk не взимается. Оплате подлежат только ресурсы AWS, необходимые для хранения и работы приложений.&lt;/p>
&lt;h2 id="практика">Практика&lt;/h2>
&lt;h3 id="контролируемое-развертывание-с-aws-elastic-beanstalk">Контролируемое развертывание с AWS Elastic Beanstalk&lt;/h3>
&lt;ul>
&lt;li>&lt;a href="https://cloudacademy.com/lab/run-controlled-deploy-aws-elastic-beanstalk/?context_resource=lp&amp;amp;context_id=4364">Ссылка на лабораторную работу&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>В этой лабораторной работе развернем несколько обновлений версий приложения в среде с балансировкой нагрузки и автоматическим масштабированием.&lt;/p>
&lt;p>Первое обновление развертывается с помощью простого развертывания. Второе обновление развертывается с помощью &lt;code>blue-green&lt;/code> развертывания, когда создается отдельная среда для запуска новой версии приложения, а DNS свитчер переключает входящий трафик на новую среду.&lt;/p>
&lt;p>Итоговая архитектура развертывания будет выглядеть следующим образом
&lt;p class="md__image">
&lt;img
src="./img/02.png"
id="zoom-default"
alt="02.png"
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;h4 id="загрузка-приложения">Загрузка приложения&lt;/h4>
&lt;p>В данном обзоре я использую код, который предоставил мне Cloudacademy, но у меня есть готовый скрипт для запуска, который вы можете загрузить в Elastic Beanstalk: &lt;a href="./files/nodejs.zip">скачать&lt;/a>&lt;/p>
&lt;h5 id="создание">Создание&lt;/h5>
&lt;p>Заходим на страницу &lt;strong>Elastic Beanstalk&lt;/strong> и нажимаем &lt;code>Create Application&lt;/code>
&lt;p class="md__image">
&lt;img
src="./img/03.png"
id="zoom-default"
alt="03.png"
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;h5 id="название">Название&lt;/h5>
&lt;p>Указываем название нового приложения
&lt;p class="md__image">
&lt;img
src="./img/04.png"
id="zoom-default"
alt="04.png"
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;h5 id="выбор-платформы">Выбор платформы&lt;/h5>
&lt;p>В разделе &lt;code>Platform&lt;/code> выбираем нужную платформу приложения. В нашем случае - &lt;code>Node.js&lt;/code>
&lt;p class="md__image">
&lt;img
src="./img/05.png"
id="zoom-default"
alt="05.png"
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;h5 id="загрузка-исходников">Загрузка исходников&lt;/h5>
&lt;p>В разделе &lt;code>Source code origin&lt;/code> указываем версию приложения и загружаем архив с приложением. &lt;a href="./files/nodejs.zip">Пример&lt;/a>&lt;/p>
&lt;p>&lt;p class="md__image">
&lt;img
src="./img/06.png"
id="zoom-default"
alt="06.png"
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;h5 id="конфигурация-приложения">Конфигурация приложения&lt;/h5>
&lt;p>Изменяем предустановку &lt;code>Configuration&lt;/code> на &lt;code>Custom configuration&lt;/code>:
&lt;p class="md__image">
&lt;img
src="./img/07.png"
id="zoom-default"
alt="07.png"
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;p>Нажимаем &lt;strong>Edit&lt;/strong> в разделе &lt;strong>Rolling updates and deployments&lt;/strong>&lt;/p>
&lt;p>В конфигурации по умолчанию обновления распространяются на все экземпляры одновременно. Это приводит к простою приложения, что неприемлемо для производственных сред.&lt;/p>
&lt;p>Мы установим &lt;code>Rolling&lt;/code> и &lt;code>Batch size&lt;/code> 30%
&lt;p class="md__image">
&lt;img
src="./img/08.png"
id="zoom-default"
alt="08.png"
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;h5 id="сеть">Сеть&lt;/h5>
&lt;p>Вернувшись к основной форме приложения, нажмите &lt;strong>Edit&lt;/strong> в конфигурации &lt;strong>Network&lt;/strong>.&lt;/p>
&lt;p>На форме &lt;strong>Modify network&lt;/strong> настроим следующие значения, затем &lt;strong>Save&lt;/strong>.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>VPC&lt;/strong>: Выберите VPC с блоком CIDR &lt;strong>10.0.0.0/16&lt;/strong>. Это не будет VPC по умолчанию.&lt;/li>
&lt;li>&lt;strong>Load balancer settings&lt;/strong>:
&lt;ul>
&lt;li>&lt;strong>Load balancer subnets&lt;/strong>: Выберите подсети с блоками CIDR &lt;strong>10.0.100.0/24&lt;/strong>(&lt;strong>us-west-2a&lt;/strong>)и &lt;strong>10.0.101.0/24&lt;/strong> (&lt;strong>us-west-2b&lt;/strong>). Это публичные подсети. Балансировщику нагрузки приложений требуется как минимум две подсети в разных зонах доступности&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Instance settings&lt;/strong>:
&lt;ul>
&lt;li>&lt;strong>Instance subnets&lt;/strong>: Выберите подсеть с блоком CIDR &lt;strong>10.0.1.0/24&lt;/strong>. Это частная подсеть.
&lt;p class="md__image">
&lt;img
src="./img/09.png"
id="zoom-default"
alt="09.png"
loading="lazy"
/>
&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;p class="md__image">
&lt;img
src="./img/10.png"
id="zoom-default"
alt="10.png"
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;h5 id="подтверждение">Подтверждение&lt;/h5>
&lt;p>Нажимаем &lt;code>Create app&lt;/code>&lt;/p>
&lt;p>Процесс создания приложения занимает от 5 минут.&lt;/p>
&lt;p>Далее переходим в раздел Dasboard
&lt;p class="md__image">
&lt;img
src="./img/11.png"
id="zoom-default"
alt="11.png"
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;p>На этом этап загрузки приложения в Elastic Beanstalk закончен. Далее разберем как переключать загрузку новой версии приложения клиентам.&lt;/p>
&lt;h4 id="загрузка-2-й-версии-приложения">Загрузка 2-й версии приложения&lt;/h4>
&lt;h5 id="загрузка-версии-20">Загрузка версии 2.0&lt;/h5>
&lt;p>Нажимаем &lt;code>Upload and deploy&lt;/code> и загружаем обновленный код. _Например, можно том же исходнике изменить текст для сравнения.
&lt;p class="md__image">
&lt;img
src="./img/12.png"
id="zoom-default"
alt="12.png"
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;p>Указываем новую версию и настройки публикации
&lt;p class="md__image">
&lt;img
src="./img/13.png"
id="zoom-default"
alt="13.png"
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;h4 id="сравнение-версий">Сравнение версий&lt;/h4>
&lt;p>Теперь можем сверить обе версии, пройдя по ссылкам. В моем случае приложения выглядят следующим образом
&lt;p class="md__image">
&lt;img
src="./img/15.png"
id="zoom-default"
alt="15.png"
loading="lazy"
/>
&lt;/p>
&lt;p class="md__image">
&lt;img
src="./img/14.png"
id="zoom-default"
alt="14.png"
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;h4 id="смена-url-у-приложений">Смена url у приложений&lt;/h4>
&lt;p>Теперь поменяем приложения местами. Чтобы пользователь, который ранее заходил по одному адресу, теперь видел 2-ю версию приложения.&lt;/p>
&lt;p>В разделе &lt;code>Actions&lt;/code> нажимаем &lt;code>Swap environment URLs&lt;/code> и далее выбираем приложение с которым происходит смена
&lt;p class="md__image">
&lt;img
src="./img/16.png"
id="zoom-default"
alt="16.png"
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;h5 id="удаление-ресурсов-elastic-beanstalk">Удаление ресурсов Elastic Beanstalk&lt;/h5>
&lt;p>Elastic Beanstalk для развертывания приложений запускает EC2 инстансы, а также прочие сервисы. Но удалить все сервисы можно из одного окна.&lt;/p>
&lt;ol>
&lt;li>Идем в раздел Applications&lt;/li>
&lt;li>Выбираем приложение&lt;/li>
&lt;li>Нажимаем Actions -&amp;gt; Terminate environment&lt;/li>
&lt;/ol>
&lt;p>&lt;p class="md__image">
&lt;img
src="./img/17.png"
id="zoom-default"
alt="17.png"
loading="lazy"
/>
&lt;/p>
&lt;/p>
&lt;h2 id="ресурсы">Ресурсы&lt;/h2>
&lt;p>&lt;a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/tutorials.html">https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/tutorials.html&lt;/a>&lt;/p></description></item></channel></rss>