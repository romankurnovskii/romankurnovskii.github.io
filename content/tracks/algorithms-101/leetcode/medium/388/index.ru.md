---
title: 388. Longest Absolute File Path
seoTitle: LeetCode 388. Longest Absolute File Path | Решение на Python.
description: LeetCode 388. Длина самого длинного имени файла. Разбор задачи и подход к решению.
toc: true
tags: [String, Medium]
categories: [Algorithms, Medium, LeetCode]
date: 2024-02-09
lastMod: 2024-02-09
weight: 388
---

[LeetCode задача 388](https://leetcode.com/problems/longest-absolute-file-path/description/)

## Задача

Необходимо вычислить длину самого длинного абсолютного пути к файлу в файловой системе. Путь представлен строкой, где "\n" разделяет имена директорий и файлов, а "\t" обозначает уровень вложенности.

## Подсказки

Задача заключается в анализе строки, представляющей файловую систему, и определении максимальной длины пути к файлу, учитывая вложенность директорий.

## Подход

Мы можем решить эту задачу, используя стек для отслеживания текущего пути и его длины. Каждый раз, когда мы встречаем файл, мы сравниваем его полную длину с максимальной и обновляем максимум при необходимости.

## Алгоритм

1. Используем стек для хранения длины каждого уровня вложенности.
1. Разбиваем входную строку на компоненты, используя "\n" как разделитель.
1. Для каждого компонента определяем уровень вложенности, подсчитывая количество символов "\t".
1. Обновляем стек в соответствии с текущим уровнем вложенности, добавляя длину текущего компонента (без символов "\t") к длине пути предыдущего уровня.
1. Если компонент является файлом (содержит точку), проверяем, является ли полная длина пути к этому файлу максимальной, и обновляем максимальную длину при необходимости.

## Решение

```python
def lengthLongestPath(input: str) -> int:
    maxlen = 0
    pathlen = {0: 0}
    for line in input.splitlines():
        name = line.lstrip('\t')
        depth = len(line) - len(name)
        
        if '.' in name:
            maxlen = max(maxlen, pathlen[depth] + len(name))
        else:
            pathlen[depth + 1] = pathlen[depth] + len(name) + 1
            
    return maxlen
```

Мы используем словарь `pathlen` для хранения максимальной длины пути до каждого уровня вложенности.

Ключ словаря - это уровень вложенности, а значение - это длина пути до этого уровня включительно.

- Если строка содержит точку, то считаем, что это файл, и обновляем `maxlen`, если текущий путь длиннее.
- Если строка не содержит точку, то это директория, и мы обновляем длину пути для следующего уровня вложенности.
