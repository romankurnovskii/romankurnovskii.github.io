---
title: 2013. Detect Squares
seoTitle: LeetCode 2013. Detect Squares | Решение на Python
description: LeetCode 2013. Detect Squares
toc: true
tags: [Arrays, "Hash Table", Design, Counting, Medium]
categories: [Algorithms, Medium, LeetCode]
date: 2024-02-10
lastMod: 2024-02-10
featuredImage: https://picsum.photos/700/219?grayscale
weight: 2013
---

[LeetCode задача 2013](https://leetcode.com/problems/detect-squares/description/)

> В данное задаче решение будет с использованием переменных на русском языке

## Задача

Задача заключается в разработке структуры данных, которая позволяет добавлять точки на плоскости и подсчитывать количество квадратов, которые можно образовать, добавив новую точку.

## Подсказки

Решение включает в себя поддержку двух типов данных:

1. Счётчик точек счетчик_точек, который хранит информацию о количестве каждой точки на плоскости.
1. Словарь координат по оси X координаты_по_x, который для каждой координаты x содержит счётчик координат y, позволяющий быстро находить все точки с данной координатой x.

## Подход

- При добавлении точки add(self, точка) мы просто увеличиваем значения в обоих счётчиках.
- При подсчёте count(self, точка), необходимо найти все точки с той же координатой x, а затем попытаться воссоздать квадраты, идя как выше, так и ниже по оси y. При этом учитываем частоту встречаемости точек с помощью счетчик_точек. Важно проверить, что y2 не равно y, чтобы избежать подсчёта невалидных квадратов.

## Решение

```python
from collections import Counter, defaultdict

class DetectSquares:
    def __init__(self):
        self.счетчик_точек = Counter()
        self.координаты_по_x = defaultdict(Counter)  # x -> все координаты y с частотами

    def add(self, точка):
        x, y = точка
        self.счетчик_точек[x, y] += 1
        self.координаты_по_x[x][y] += 1

    def count(self, точка):
        x, y = точка
        ответ = 0
        for y2 in self.координаты_по_x[x]:
            if y == y2: continue
            ответ += self.счетчик_точек[x, y2] * self.счетчик_точек[x + y2 - y, y] * self.счетчик_точек[x + y2 - y, y2]
            ответ += self.счетчик_точек[x, y2] * self.счетчик_точек[x + y - y2, y] * self.счетчик_точек[x + y - y2, y2]
        return ответ

```
