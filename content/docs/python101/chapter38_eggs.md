---
title: 38. Python egg
description: Python 101
toc: true
authors:
tags:
categories:
series:
featuredImage:
date: "2022-06-28"
lastmod: "2022-06-28"
draft: false
weight: 38
---

Python **egg** - это старый формат распространения Python. Новый формат называется Python **wheel**, который мы рассмотрим в следующей главе. Файл egg - это, по сути, zip-файл с другим расширением. Python может импортироваться непосредственно из egg. Для работы с eggs вам понадобится пакет SetupTools. **SetupTools** - это оригинальный основной метод загрузки и установки пакетов Python из PyPI и других источников через командную строку, что-то вроде apt-get для Python. Существовал форк SetupTools под названием **distribute**, который в итоге был объединен обратно в SetupTools. Я упоминаю об этом только потому, что вы можете встретить ссылки на этот форк, если будете много читать о Python eggs вне этой книги.

Несмотря на то, что от формата eggs сейчас отказываются, вам все еще нужно знать о нем, поскольку существует множество пакетов, распространяемых с помощью этой технологии. Возможно, пройдут годы, прежде чем все перестанут использовать eggs. Давайте научимся создавать свои собственные!

**Создание egg**

Вы можете думать об egg как об альтернативе исходному дистрибутиву или исполняемому файлу Windows, но следует отметить, что для eggs чистого Python файл egg является полностью кроссплатформенным. Мы рассмотрим, как создать собственное egg, используя пакет, который мы создали в предыдущей главе о модулях и пакетах. Чтобы приступить к созданию egg, вам нужно создать новую папку и поместить в нее папку **mymath**. Затем создайте файл **setup.py** в родительском каталоге папки mymath со следующим содержимым:


```sh
from setuptools import setup, find_packages

setup(
    name = "mymath",
    version = "0.1",
    packages = find_packages()
    )
```

В Python есть собственный пакет для создания дистрибутивов, который называется **distutils**. Однако вместо использования функции установки **distutils** в Python, мы используем функцию установки **setuptools**. Мы также используем функцию **find_packages** от setuptools, которая будет автоматически искать любые пакеты в текущем каталоге и добавлять их в egg. Чтобы создать egg, вам нужно выполнить следующее из командной строки:

```sh
c:\Python34\python.exe setup.py bdist_egg
```
Это приведет к появлению большого количества выходных данных, но когда все будет готово, вы увидите, что у вас есть три новые папки: **build, dist** и **mymath.egg-info**. Нам важна только папка dist, в которой вы найдете файл egg, **mymath-0.1-py3.4.egg**. Обратите внимание, что на моей машине я заставил программу запускаться на Python 3.4, чтобы она создала egg на этой версии Python. Сам файл egg - это, по сути, zip-файл. Если вы измените расширение на "zip", вы сможете заглянуть внутрь и увидеть, что в нем есть две папки: **mymath** и **EGG-INFO**. Теперь вы можете указать **easy_install** на egg в вашей файловой системе, и он установит ваш пакет.

## Подведение итогов

Теперь настала ваша очередь. Зайдите в индекс пакетов Python и найдите несколько модулей чистого Python для загрузки. Затем попробуйте создать eggs, используя приемы, которые вы изучили в этой главе. Если вы хотите установить egg, вы можете использовать **easy_install**. Удалить egg немного сложнее. Вам придется перейти к месту его установки и удалить папку и/или файл egg, которые оно установило, а также удалить запись о пакете из файла easy-install.pth. Все эти элементы можно найти в папке **site-packages** вашего Python.
