---
title: 29. Установка пакетов
description: Python 101
toc: true
authors:
tags:
categories:
series:
featuredImage:
date: "2022-06-28"
lastmod: "2022-06-28"
draft: false
weight: 29
---


Когда вы только начинаете программировать на Python, вы не задумываетесь о том, что вам может понадобиться установить внешний пакет или модуль. Но когда такая необходимость возникнет, вы захотите узнать, как это сделать в кратчайшие сроки! Пакеты Python можно найти по всему интернету. Большинство популярных из них можно найти в Python Package Index (PyPI). Вы также найдете множество пакетов Python на github, bitbucket и Google code. В этой статье мы рассмотрим следующие методы установки пакетов Python:

-  Установка из исходного кода
-  easy_install
-  pip
-  Другие способы установки пакетов

## Установка из исходного кода

Установка из исходного кода - отличный навык. Есть и более простые способы, о которых мы расскажем далее в статье. Однако есть некоторые пакеты, которые необходимо устанавливать из исходного кода. Например, чтобы использовать **easy_install**, вам нужно сначала установить **setuptools**. Для этого вам нужно скачать tar или zip файл из индекса пакетов Python и распаковать его где-нибудь в вашей системе. Затем найдите файл **setup.py**. Откройте сеанс терминала и перейдите в папку, содержащую файл setup. Затем выполните следующую команду:

```sh
python setup.py install
```

Если Python отсутствует в системном пути, вы получите сообщение об ошибке, в котором будет сказано, что команда python не найдена или является неизвестным приложением. Вы можете вызвать эту команду, используя полный путь к Python. Вот как это можно сделать, если вы работаете в Windows:

```sh
c:\python34\python.exe setup.py install
```

Этот метод особенно удобен, если у вас установлено несколько версий Python и вам нужно установить пакет на разные версии. Все, что вам нужно сделать, это ввести полный путь к нужной версии Python и установить пакет на нее.

Некоторые пакеты содержат C-код, например, заголовочные файлы C, которые необходимо скомпилировать, чтобы пакет установился правильно. В Linux обычно уже установлен компилятор C/C++, и вы можете установить пакет с минимальной головной болью. В Windows для корректной компиляции пакета вам потребуется установить правильную версию Visual Studio. Некоторые говорят, что можно использовать и MingW, но я пока не нашел способа заставить его работать. Если в пакете уже есть готовый установщик для Windows, используйте его. Тогда вам вообще не придется возиться с компиляцией.

## Использование easy_install

После установки **setuptools** вы можете использовать **easy_install**. Вы можете найти его установленным в папке **Scripts** вашей установки Python. Не забудьте добавить папку Scripts в системный путь, чтобы можно было вызывать easy_install из командной строки без указания полного пути. Попробуйте выполнить следующую команду, чтобы узнать обо всех опциях easy_install:

```python
easy_install -h
```

Когда вы хотите установить пакет с помощью easy_install, все, что вам нужно сделать, это следующее:

```sh
easy_install package_name
```

easy_install попытается загрузить пакет из PyPI, скомпилировать его (если необходимо) и установить. Если вы зайдете в каталог **site-packages** вашего Python, вы найдете файл **easy-install.pth**, который будет содержать запись для всех пакетов, установленных с помощью easy_install. Этот файл используется Python для помощи в импорте модуля или пакета.

Вы также можете указать easy_install установить пакет с URL или с пути на вашем компьютере. Он также может устанавливать пакеты непосредственно из tar-файла. Вы можете использовать easy_install для обновления пакета с помощью команды **-upgrade** (или **-U**). Наконец, вы можете использовать easy_install для установки eggs Python. Файлы eeg можно найти на PyPI и в других местах. Egg - это, по сути, специальный zip-файл. На самом деле, если вы измените расширение на .zip, вы сможете разархивировать файл egg.

Вот несколько примеров:

```sh
easy_install -U SQLAlchemy
easy_install http://example.com/path/to/MyPackage-1.2.3.tgz
easy_install /path/to/downloaded/package
```
Существуют некоторые проблемы с easy_install. Он будет пытаться установить пакет до завершения его загрузки. Не существует способа удалить пакет с помощью easy_install. Вам придется удалить пакет самостоятельно и обновить файл easy-install.pth, удалив запись о пакете. По этим и другим причинам в сообществе Python возникло желание создать что-то другое, что привело к появлению pip.

## Использование pip

Программа pip фактически поставляется с Python 3.4. Если у вас более старая версия Python, то вам придется установить pip вручную. Установка pip немного отличается от того, что мы обсуждали ранее. Вы по-прежнему заходите на PyPI, но вместо загрузки пакета и запуска его сценария setup.py, вам будет предложено загрузить один сценарий **get-pip.py**. Затем вам нужно будет выполнить его, сделав следующее:

```sh
python get-pip.py
```

Это позволит установить **setuptools** или альтернативу setuptools под названием distribute, если одна из них еще не установлена. Она также установит pip. pip работает с CPython версий 2.6, 2.7, 3.1, 3.2, 3.3, 3.4, а также с pypy. Вы можете использовать pip для установки всего, что может установить easy_install, но вызов немного отличается. Чтобы установить пакет, сделайте следующее:

```sh
pip install package_name
```

Чтобы обновить пакет, сделайте следующее:

```sh
pip install -U PackageName
```

Вы можете вызвать **pip -h**, чтобы получить полный список всего, что может сделать pip. Одна вещь, которую pip может установить, но не может установить easy_install, - это формат Python wheel. Wheel - это архив в формате ZIP со специально отформатированным именем файла и расширением .whl. Вы также можете установить wheel с помощью собственной утилиты командной строки. С другой стороны, pip не может установить яйцо. Если вам нужно установить egg, воспользуйтесь easy_install.

## Замечание о зависимостях

Одним из преимуществ использования **easy_install** и **pip** является то, что если пакет имеет зависимости, указанные в скрипте **setup.py**, то easy_install и pip попытаются загрузить и установить и их. Это может облегчить многие разочарования, когда вы пробуете новые пакеты и не знаете, что пакет A зависит от пакетов B, C и D. С **easy_install** или **pip** вам больше не нужно беспокоиться об этом.

## Подведение итогов

На данный момент вы можете установить практически любой пакет, который вам нужен, при условии, что пакет поддерживает вашу версию Python. Программисту Python доступно множество инструментов. Хотя упаковка в Python сейчас немного запутана, как только вы узнаете, как использовать соответствующие инструменты, вы обычно сможете установить или упаковать то, что вам нужно. Мы подробнее рассмотрим создание собственных пакетов, eggs и wheels в части V.
